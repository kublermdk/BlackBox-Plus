!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}([,function(e,t,n){e.exports=n(7)},function(e,t){function n(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function s(e){n(i,o,a,s,c,"next",e)}function c(e){n(i,o,a,s,c,"throw",e)}s(void 0)}))}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";let{Json2Csv:r}=n(26),{Csv2Json:o}=n(29),a=n(21);function i(e,t,n,r){return a.convert({data:t,callback:n,options:r,converter:e})}function s(e,t,n){return new Promise((r,o)=>i(e,t,(e,t)=>e?o(e):r(t),n))}function c(e,t,n,r,o){return console.warn("WARNING: "+t+" is deprecated and will be removed soon. Please use "+n+" instead."),s(e,r,o)}e.exports={json2csv:(e,t,n)=>i(r,e,t,n),csv2json:(e,t,n)=>i(o,e,t,n),json2csvAsync:(e,t)=>s(r,e,t),csv2jsonAsync:(e,t)=>s(o,e,t),json2csvPromisified:(e,t)=>c(r,"json2csvPromisified()","json2csvAsync()",e,t),csv2jsonPromisified:(e,t)=>c(o,"csv2jsonPromisified()","csv2jsonAsync()",e,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=y(i,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function u(){}function f(){}function d(){}var p={};p[o]=function(){return this};var h=Object.getPrototypeOf,m=h&&h(h(w([])));m&&m!==t&&n.call(m,o)&&(p=m);var b=d.prototype=u.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e){var t;this._invoke=function(r,o){function a(){return new Promise((function(t,a){!function t(r,o,a,i){var s=c(e[r],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):Promise.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,i)}))}i(s.arg)}(r,o,t,a)}))}return t=t?t.then(a,a):a()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=b.constructor=d,d.constructor=f,d[i]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(v.prototype),v.prototype[a]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,r,o){var a=new v(s(t,n,r,o));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),b[i]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(17),o=n(18);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(19);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(1),o=n.n(r),a=n(2),i=n.n(a),s=n(3),c=n.n(s),l=n(4),u=n.n(l),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c()(this,e),this.header="BlackBox Plus",this.bookmarkletInfoId="bbox_plus_bookmarklet_info",this.idPostfix="",this.infoElement=void 0,this.infoTextElement=void 0,this.infoStatusElement=void 0,this.infoHeaderElement=void 0,this.authToken=void 0,this.memberId=void 0,this.interfaceSection=void 0,this.messagesSection=void 0,this.bbox_m_header_menu_id="m_header_menu";var n=document.getElementById(this.bookmarkletInfoId);if(n){if(this.idPostfix="_2",this.bookmarkletInfoId="bbox_plus_bookmarklet_info"+this.idPostfix,document.getElementById(this.bookmarkletInfoId))throw this.addFlashMessage("Unable to add a 3rd BlackBox Plus system","error"),new Error("Unable to add a 3rd BlackBox Plus system");n.insertAdjacentHTML("afterend",'<div id="'.concat(this.bookmarkletInfoId,'" class="bbox_plus_bookmarklet_info_wrapper" style="color: white; float: left; padding-top: 10px; position: absolute; width: 250px; left: 425px;"><h3 id="bbox_plus_header').concat(this.idPostfix,'"  class="bbox_plus_header">BlackBox Plus</h3><p style="color: white" class="bbox_plus_info_text_wrapper"><strong id="bbox_plus_status').concat(this.idPostfix,'" style="color: red" class="bbox_plus_info_status">*</strong> &nbsp; <span id="bbox_plus_text').concat(this.idPostfix,'"  class="bbox_plus_info_text">Loading</span></p></div>')),console.debug("Setup a 2nd Blackbox Plus info")}else{console.debug("Setting up "+this.bbox_m_header_menu_id);var r=document.getElementById(this.bbox_m_header_menu_id);if(!r)throw this.addFlashMessage("Unable to find the Nav Menu, can't add BlackBox, wait until it's loaded and try again","error"),new Error("Unable to find the Nav Menu");r.insertAdjacentHTML("afterend",'                   <div id="'.concat(this.bookmarkletInfoId,'" class="bbox_plus_bookmarklet_info_wrapper" style="color: white; float: left; padding-top: 10px; position: absolute; left: 150px; width: 270px;"><h3 id="bbox_plus_header"                 class="bbox_plus_header">BlackBox Plus</h3><p style="color: white" class="bbox_plus_info_text_wrapper"><strong id="bbox_plus_status"                     style="color: red" class="bbox_plus_info_status">*</strong> &nbsp; <span id="bbox_plus_text"                   class="bbox_plus_info_text">Loading</span></p></div>')),console.debug("Setup a Blackbox Plus info")}this.infoElement=document.getElementById(this.bookmarkletInfoId),this.infoHeaderElement=document.getElementById("bbox_plus_header"+this.idPostfix),this.infoStatusElement=document.getElementById("bbox_plus_status"+this.idPostfix),this.infoTextElement=document.getElementById("bbox_plus_text"+this.idPostfix),this.createFooterSection(),t&&(this.setHeader(t),this.setInterface("<h2>BlackBox Plus ".concat(t,"</h2>"))),this.addMessage('<hr /><h3>Messages</h3><a>You can add this bookmarklet from <a href="https://blackboxplus.greyphoenix.biz/">blackboxplus.greyphoenix.biz</a> and checkout the codebase on <a href="https://github.com/kublermdk/BlackBox-Plus">Github</a></p>')}var t;return u()(e,[{key:"createFooterSection",value:function(){var e=document.getElementById("bbox_plus_footer_wrapper"),t=document.getElementsByTagName("footer")[0]||null,n='<div class="bbox_plus_interface_wrapper" style="float: left; margin-left: 10px; margin-bottom: 10px;"><div id="bbox_plus_interface_section'.concat(this.idPostfix,'"></div><div id="bbox_plus_messages_section').concat(this.idPostfix,'"></div></div>');if(t&&e)e.insertAdjacentHTML("beforeend",n),$(".bbox_plus_interface_wrapper")[0].style.width="48%",$(".bbox_plus_interface_wrapper")[1].style.width="48%";else{if(!t)throw console.error("Issue trying to find the <footer> element"),this.addFlashMessage("Unable to find the footer section, wait until the page has fully loaded and try again or refresh","error"),new Error("Unable to create a Footer section, no footer element found");t.insertAdjacentHTML("afterend",'<div id="bbox_plus_footer_wrapper">'.concat(n,"</div>"))}this.interfaceSection=document.getElementById("bbox_plus_interface_section".concat(this.idPostfix)),this.messagesSection=document.getElementById("bbox_plus_messages_section".concat(this.idPostfix))}},{key:"setInterface",value:function(e){return this.interfaceSection.innerHTML=e,!0}},{key:"addMessage",value:function(e){var t=this.messagesSection.innerHTML||"";return this.messagesSection.innerHTML=t+e,!0}},{key:"addFlashMessage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r='<div class="bbox_plus bbox_plus_flash_message bbox_plus_flash_message_type_'.concat(t,'"><span class="bbox_plus_flash_message_closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>').concat(e,"</div>"),o=document.createElement("div");return o.innerHTML=r,document.body.insertAdjacentElement("beforeend",o),!0===n&&setTimeout((function(){o.remove()}),6e3),o}},{key:"setHeader",value:function(e){this.header=e,this.infoHeaderElement.innerHTML=e}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&(this.infoTextElement.innerHTML=e),t&&(this.infoStatusElement.style.color=t),console.debug("Status: "+e)}},{key:"setStatusError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setHeader("ERROR "+this.header),this.setStatus('<span style="color: red">ERROR '.concat(e,"</span>"),"red"),this.addFlashMessage("Error "+e,"error"),console.error("## ERROR ## "+e)}},{key:"setStatusLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setStatus("Loading "+e,"orange"),console.debug("Loading: "+e)}},{key:"setStatusProcessing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setStatus("Processing "+e,"orange"),console.debug("Processing: "+e)}},{key:"setStatusDone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setStatus("Completed "+e,"green"),console.debug("Completed: "+e)}},{key:"dynamicallyLoadScript",value:function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.head.appendChild(t)}},{key:"getAuthToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.authToken&&!1===e)return this.authToken;var t=localStorage.token;if(!t)throw this.setStatusError("Unable to get your auth token, are you logged in?"),new Error("Error, invalid auth token");return t}},{key:"getMemberId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.memberId&&!1===e)return this.memberId;var t=$(".m-topbar__userpic img").attr("src");if(t){var n=t.replace("https://portal.blackbox.global/api/member/","").replace(/\/W\/avatar.*/,"");if(!n)throw this.setStatusError("Unable to work out your BlackBox memberId"),new Error("Issue trying to work out the memberId based off the avatar image");return this.memberId=n,n}throw this.setStatusError("Do you have an avatar picture? Without it we are unable to work out your BlackBox memberId"),new Error("Error, Unable to work out your Blackbox MemberId")}},{key:"clearMarketplaceCollaborationProjectsList",value:(t=i()(o.a.mark((function e(){var t,n,r,a,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setStatusLoading("Loading up the Collaboration Projects list"),t=this.getMemberId(),this.getAuthToken(),n=getDefaultAPICallHeaders("POST"),e.next=6,fetch("https://portal.blackbox.global/api/member/".concat(t,"/collaboratedProjects?index=1&limit=100"),n);case 6:if(!(r=e.sent).ok){e.next=16;break}return e.next=10,r.json();case 10:a=e.sent,console.debug("There are ".concat(a.list.length," Collaboration Project entries "),a),this.setStatusProcessing("Clearing the ".concat(a.list.length," Collaboration Projects")),a.list.length>0&&(n.method="PUT",a.list.forEach((function(e,r){i.setStatusProcessing("Clearing #".concat(r," ").concat(e.projectName)),console.debug("Clearing the Collab Entry #".concat(r," ").concat(e.projectName),e),fetch("https://portal.blackbox.global/api/member/".concat(t,"/project/").concat(e.projectId,"/clearCurationProject"),n)}))),e.next=17;break;case 16:this.setStatusError("Unable to get the list of projects. HTTP-Error: ".concat(r.status));case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getAPICallHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=this.getAuthToken();return{credentials:"include",headers:{accept:"application/json, text/plain, */*","accept-language":"en-AU,en;q=0.9,en-US;q=0.8","cache-control":"no-cache","content-type":"application/vnd.blackbox.v1+json",pragma:"no-cache","sec-fetch-mode":"cors","sec-fetch-site":"same-origin",timeout:"8000",token:t},referrer:"https://portal.blackbox.global/footage/marketplace?blackbox_plus=true",referrerPolicy:"no-referrer-when-downgrade",method:e,mode:"cors"}}},{key:"getFormattedDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{Y}-{M}-{D}{st} {h}_{m}{ap}",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="";(n=(t=t||new Date).getMonth()+1)<10&&(n="0"+n),e=e.replace(/{M}/g,n);var r="";(r=t.getDate())<10&&(r="0"+r),e=e.replace(/{D}/g,r);var o="th",a=t.getDate();a<4&&(3===a?o="rd":2===a?o="nd":1===a&&(o="st")),e=e.replace(/{st}/g,o);var i="";i=t.getFullYear(),e=e.replace(/{Y}/g,i);var s=t.getHours(),c="",l=s>11;s>12&&(s-=12),c=l?"PM":"AM";var u="";u=s<10?"0"+s:s,e=(e=e.replace(/{ap}/g,c)).replace(/{h}/g,u);var f="";return(f=t.getMinutes())<10&&(f="0"+f),e=e.replace(/{m}/g,f)}},{key:"createNewElement",value:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.childNodes[0];)t.appendChild(n.childNodes[0]);return t}}]),e}()},function(e,t,n){(function(e,n){var r;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},a=o._,i=Array.prototype,s=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=i.push,u=i.slice,f=s.toString,d=s.hasOwnProperty,p=Array.isArray,h=Object.keys,m=Object.create,b=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};t.nodeType?o._=g:(!n.nodeType&&n.exports&&(t=n.exports=g),t._=g),g.VERSION="1.9.1";var v,y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,a){return e.call(t,n,r,o,a)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return g.iteratee!==v?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?y(e,t,n):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=v=function(e,t){return _(e,t,1/0)};var x=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var a=Array(t+1);for(o=0;o<t;o++)a[o]=arguments[o];return a[t]=r,e.apply(this,a)}},k=function(e){if(!g.isObject(e))return{};if(m)return m(e);b.prototype=e;var t=new b;return b.prototype=null,t},w=function(e){return function(t){return null==t?void 0:t[e]}},j=function(e,t){return null!=e&&d.call(e,t)},P=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},E=Math.pow(2,53)-1,F=w("length"),S=function(e){var t=F(e);return"number"==typeof t&&t>=0&&t<=E};g.each=g.forEach=function(e,t,n){var r,o;if(t=y(t,n),S(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var a=g.keys(e);for(r=0,o=a.length;r<o;r++)t(e[a[r]],a[r],e)}return e},g.map=g.collect=function(e,t,n){t=_(t,n);for(var r=!S(e)&&g.keys(e),o=(r||e).length,a=Array(o),i=0;i<o;i++){var s=r?r[i]:i;a[i]=t(e[s],s,e)}return a};var B=function(e){var t=function(t,n,r,o){var a=!S(t)&&g.keys(t),i=(a||t).length,s=e>0?0:i-1;for(o||(r=t[a?a[s]:s],s+=e);s>=0&&s<i;s+=e){var c=a?a[s]:s;r=n(r,t[c],c,t)}return r};return function(e,n,r,o){var a=arguments.length>=3;return t(e,y(n,o,4),r,a)}};g.reduce=g.foldl=g.inject=B(1),g.reduceRight=g.foldr=B(-1),g.find=g.detect=function(e,t,n){var r=(S(e)?g.findIndex:g.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},g.filter=g.select=function(e,t,n){var r=[];return t=_(t,n),g.each(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r},g.reject=function(e,t,n){return g.filter(e,g.negate(_(t)),n)},g.every=g.all=function(e,t,n){t=_(t,n);for(var r=!S(e)&&g.keys(e),o=(r||e).length,a=0;a<o;a++){var i=r?r[a]:a;if(!t(e[i],i,e))return!1}return!0},g.some=g.any=function(e,t,n){t=_(t,n);for(var r=!S(e)&&g.keys(e),o=(r||e).length,a=0;a<o;a++){var i=r?r[a]:a;if(t(e[i],i,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,n,r){return S(e)||(e=g.values(e)),("number"!=typeof n||r)&&(n=0),g.indexOf(e,t,n)>=0},g.invoke=x((function(e,t,n){var r,o;return g.isFunction(t)?o=t:g.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),g.map(e,(function(e){var a=o;if(!a){if(r&&r.length&&(e=P(e,r)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))})),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,n){var r,o,a=-1/0,i=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=S(e)?e:g.values(e)).length;s<c;s++)null!=(r=e[s])&&r>a&&(a=r);else t=_(t,n),g.each(e,(function(e,n,r){((o=t(e,n,r))>i||o===-1/0&&a===-1/0)&&(a=e,i=o)}));return a},g.min=function(e,t,n){var r,o,a=1/0,i=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=S(e)?e:g.values(e)).length;s<c;s++)null!=(r=e[s])&&r<a&&(a=r);else t=_(t,n),g.each(e,(function(e,n,r){((o=t(e,n,r))<i||o===1/0&&a===1/0)&&(a=e,i=o)}));return a},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,n){if(null==t||n)return S(e)||(e=g.values(e)),e[g.random(e.length-1)];var r=S(e)?g.clone(e):g.values(e),o=F(r);t=Math.max(Math.min(t,o),0);for(var a=o-1,i=0;i<t;i++){var s=g.random(i,a),c=r[i];r[i]=r[s],r[s]=c}return r.slice(0,t)},g.sortBy=function(e,t,n){var r=0;return t=_(t,n),g.pluck(g.map(e,(function(e,n,o){return{value:e,index:r++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")};var I=function(e,t){return function(n,r,o){var a=t?[[],[]]:{};return r=_(r,o),g.each(n,(function(t,o){var i=r(t,o,n);e(a,t,i)})),a}};g.groupBy=I((function(e,t,n){j(e,n)?e[n].push(t):e[n]=[t]})),g.indexBy=I((function(e,t,n){e[n]=t})),g.countBy=I((function(e,t,n){j(e,n)?e[n]++:e[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?u.call(e):g.isString(e)?e.match(A):S(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:S(e)?e.length:g.keys(e).length},g.partition=I((function(e,t,n){e[n?0:1].push(t)}),!0),g.first=g.head=g.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},g.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var O=function(e,t,n,r){for(var o=(r=r||[]).length,a=0,i=F(e);a<i;a++){var s=e[a];if(S(s)&&(g.isArray(s)||g.isArguments(s)))if(t)for(var c=0,l=s.length;c<l;)r[o++]=s[c++];else O(s,t,n,r),o=r.length;else n||(r[o++]=s)}return r};g.flatten=function(e,t){return O(e,t,!1)},g.without=x((function(e,t){return g.difference(e,t)})),g.uniq=g.unique=function(e,t,n,r){g.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=_(n,r));for(var o=[],a=[],i=0,s=F(e);i<s;i++){var c=e[i],l=n?n(c,i,e):c;t&&!n?(i&&a===l||o.push(c),a=l):n?g.contains(a,l)||(a.push(l),o.push(c)):g.contains(o,c)||o.push(c)}return o},g.union=x((function(e){return g.uniq(O(e,!0,!0))})),g.intersection=function(e){for(var t=[],n=arguments.length,r=0,o=F(e);r<o;r++){var a=e[r];if(!g.contains(t,a)){var i;for(i=1;i<n&&g.contains(arguments[i],a);i++);i===n&&t.push(a)}}return t},g.difference=x((function(e,t){return t=O(t,!0,!0),g.filter(e,(function(e){return!g.contains(t,e)}))})),g.unzip=function(e){for(var t=e&&g.max(e,F).length||0,n=Array(t),r=0;r<t;r++)n[r]=g.pluck(e,r);return n},g.zip=x(g.unzip),g.object=function(e,t){for(var n={},r=0,o=F(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var T=function(e){return function(t,n,r){n=_(n,r);for(var o=F(t),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(n(t[a],a,t))return a;return-1}};g.findIndex=T(1),g.findLastIndex=T(-1),g.sortedIndex=function(e,t,n,r){for(var o=(n=_(n,r,1))(t),a=0,i=F(e);a<i;){var s=Math.floor((a+i)/2);n(e[s])<o?a=s+1:i=s}return a};var L=function(e,t,n){return function(r,o,a){var i=0,s=F(r);if("number"==typeof a)e>0?i=a>=0?a:Math.max(a+s,i):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return r[a=n(r,o)]===o?a:-1;if(o!=o)return(a=t(u.call(r,i,s),g.isNaN))>=0?a+i:-1;for(a=e>0?i:s-1;a>=0&&a<s;a+=e)if(r[a]===o)return a;return-1}};g.indexOf=L(1,g.findIndex,g.sortedIndex),g.lastIndexOf=L(-1,g.findLastIndex),g.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),a=0;a<r;a++,e+=n)o[a]=e;return o},g.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(u.call(e,r,r+=t));return n};var D=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var a=k(e.prototype),i=e.apply(a,o);return g.isObject(i)?i:a};g.bind=x((function(e,t,n){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var r=x((function(o){return D(e,r,t,this,n.concat(o))}));return r})),g.partial=x((function(e,t){var n=g.partial.placeholder,r=function(){for(var o=0,a=t.length,i=Array(a),s=0;s<a;s++)i[s]=t[s]===n?arguments[o++]:t[s];for(;o<arguments.length;)i.push(arguments[o++]);return D(e,r,this,this,i)};return r})),g.partial.placeholder=g,g.bindAll=x((function(e,t){var n=(t=O(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=g.bind(e[r],e)}})),g.memoize=function(e,t){var n=function(r){var o=n.cache,a=""+(t?t.apply(this,arguments):r);return j(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},g.delay=x((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,n){var r,o,a,i,s=0;n||(n={});var c=function(){s=!1===n.leading?0:g.now(),r=null,i=e.apply(o,a),r||(o=a=null)},l=function(){var l=g.now();s||!1!==n.leading||(s=l);var u=t-(l-s);return o=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=l,i=e.apply(o,a),r||(o=a=null)):r||!1===n.trailing||(r=setTimeout(c,u)),i};return l.cancel=function(){clearTimeout(r),s=0,r=o=a=null},l},g.debounce=function(e,t,n){var r,o,a=function(t,n){r=null,n&&(o=e.apply(t,n))},i=x((function(i){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(a,t),s&&(o=e.apply(this,i))}else r=g.delay(a,t,this,i);return o}));return i.cancel=function(){clearTimeout(r),r=null},i},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},g.once=g.partial(g.before,2),g.restArguments=x;var M=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=function(e,t){var n=C.length,r=e.constructor,o=g.isFunction(r)&&r.prototype||s,a="constructor";for(j(e,a)&&!g.contains(t,a)&&t.push(a);n--;)(a=C[n])in e&&e[a]!==o[a]&&!g.contains(t,a)&&t.push(a)};g.keys=function(e){if(!g.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)j(e,n)&&t.push(n);return M&&N(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&N(e,t),t},g.values=function(e){for(var t=g.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r},g.mapObject=function(e,t,n){t=_(t,n);for(var r=g.keys(e),o=r.length,a={},i=0;i<o;i++){var s=r[i];a[s]=t(e[s],s,e)}return a},g.pairs=function(e){for(var t=g.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},g.invert=function(e){for(var t={},n=g.keys(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t},g.functions=g.methods=function(e){var t=[];for(var n in e)g.isFunction(e[n])&&t.push(n);return t.sort()};var R=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var a=arguments[o],i=e(a),s=i.length,c=0;c<s;c++){var l=i[c];t&&void 0!==n[l]||(n[l]=a[l])}return n}};g.extend=R(g.allKeys),g.extendOwn=g.assign=R(g.keys),g.findKey=function(e,t,n){t=_(t,n);for(var r,o=g.keys(e),a=0,i=o.length;a<i;a++)if(t(e[r=o[a]],r,e))return r};var H,U,W=function(e,t,n){return t in n};g.pick=x((function(e,t){var n={},r=t[0];if(null==e)return n;g.isFunction(r)?(t.length>1&&(r=y(r,t[1])),t=g.allKeys(e)):(r=W,t=O(t,!1,!1),e=Object(e));for(var o=0,a=t.length;o<a;o++){var i=t[o],s=e[i];r(s,i,e)&&(n[i]=s)}return n})),g.omit=x((function(e,t){var n,r=t[0];return g.isFunction(r)?(r=g.negate(r),t.length>1&&(n=t[1])):(t=g.map(O(t,!1,!1),String),r=function(e,n){return!g.contains(t,n)}),g.pick(e,r,n)})),g.defaults=R(g.allKeys,!0),g.create=function(e,t){var n=k(e);return t&&g.extendOwn(n,t),n},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var n=g.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),a=0;a<r;a++){var i=n[a];if(t[i]!==o[i]||!(i in o))return!1}return!0},H=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&U(e,t,n,r)},U=function(e,t,n,r){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var o=f.call(e);if(o!==f.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var i=e.constructor,s=t.constructor;if(i!==s&&!(g.isFunction(i)&&i instanceof i&&g.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!H(e[l],t[l],n,r))return!1}else{var u,d=g.keys(e);if(l=d.length,g.keys(t).length!==l)return!1;for(;l--;)if(u=d[l],!j(t,u)||!H(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0},g.isEqual=function(e,t){return H(e,t)},g.isEmpty=function(e){return null==e||(S(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=p||function(e){return"[object Array]"===f.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){g["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}})),g.isArguments(arguments)||(g.isArguments=function(e){return j(e,"callee")});var J=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof J&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return j(e,t);for(var n=t.length,r=0;r<n;r++){var o=t[r];if(null==e||!d.call(e,o))return!1;e=e[o]}return!!n},g.noConflict=function(){return o._=a,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return P(t,e)}:w(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?P(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=g.invert(V),q=function(e){var t=function(t){return e[t]},n="(?:"+g.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};g.escape=q(V),g.unescape=q($),g.result=function(e,t,n){g.isArray(t)||(t=[t]);var r=t.length;if(!r)return g.isFunction(n)?n.call(e):n;for(var o=0;o<r;o++){var a=null==e?void 0:e[t[o]];void 0===a&&(a=n,o=r),e=g.isFunction(a)?a.call(e):a}return e};var K=0;g.uniqueId=function(e){var t=++K+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+z[e]};g.template=function(e,t,n){!t&&n&&(t=n),t=g.defaults({},t,g.templateSettings);var r,o=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(o,(function(t,n,r,o,s){return i+=e.slice(a,s).replace(Y,Q),a=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t})),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{r=new Function(t.variable||"obj","_",i)}catch(e){throw e.source=i,e}var s=function(e){return r.call(this,e,g)},c=t.variable||"obj";return s.source="function("+c+"){\n"+i+"}",s},g.chain=function(e){var t=g(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),(function(t){var n=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),Z(this,n.apply(g,e))}})),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=i[e];g.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Z(this,n)}})),g.each(["concat","join","slice"],(function(e){var t=i[e];g.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}})),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return g}.apply(t,[]))||(n.exports=r)}()}).call(this,n(6),n(27)(e))},function(e,t,n){var r=n(14),o=n(15);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1},i=(r(o,a),o.locals?o.locals:{});e.exports=i},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var f=s(u),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(i[f].references++,i[f].updater(d)):i.push({identifier:u,updater:b(d,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,f=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,m=0;function b(e,t){var n,r,o;if(t.singleton){var a=m++;n=h||(h=l(t)),r=d.bind(null,n,a,!1),o=d.bind(null,n,a,!0)}else n=l(t),r=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);i[o].references--}for(var a=c(e,t),l=0;l<n.length;l++){var u=s(n[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=a}}}},function(e,t,n){(t=n(16)(!1)).push([e.i,".bbox_plus_info_text {\n  text-shadow: 2px 2px 2px grey;\n}\n/* The alert message box */\n.bbox_plus_flash_message {\n  position: fixed;\n  top: 200px;\n  left: 20px;\n  width: 200px;\n  display: block;\n  z-index: 9999;\n  padding: 10px;\n  border-radius: 6px;\n  color: white;\n  background: rgba(244, 67, 54, 0.8);\n  border: 2px solid red;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);\n}\n.bbox_plus_flash_message_type_info {\n  color: #31708f;\n  background: rgba(217, 237, 247, 0.9);\n  border-color: #c6dbe6;\n}\n.bbox_plus_flash_message_type_success {\n  color: darkgreen;\n  background: rgba(144, 238, 144, 0.9);\n  border: darkgreen;\n}\n.bbox_plus_flash_message_type_warn {\n  color: #9F6000;\n  border-color: #9F6000;\n  background: rgba(254, 239, 179, 0.9);\n}\n.bbox_plus_flash_message_type_error {\n  color: #D8000C;\n  background: rgba(255, 186, 186, 0.9);\n  border-color: red;\n}\n/* The close button */\n.bbox_plus_flash_message_closebtn {\n  margin-left: 15px;\n  color: black;\n  font-weight: bold;\n  float: right;\n  font-size: 22px;\n  line-height: 20px;\n  cursor: pointer;\n  transition: 0.3s;\n}\n.bbox_plus_flash_message_closebtn:hover {\n  color: black;\n  font-size: 27px;\n}\n.bbox_plus_download_link {\n  font-weight: bold;\n}\n.bbox_plus_button,\n.bbox_plus button {\n  cursor: pointer;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([o]).join("\n")}var i,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e){e.exports=JSON.parse('{"errors":{"callbackRequired":"A callback is required!","optionsRequired":"Options were not passed and are required.","json2csv":{"cannotCallOn":"Cannot call json2csv on ","dataCheckFailure":"Data provided was not an array of documents.","notSameSchema":"Not all documents have the same schema."},"csv2json":{"cannotCallOn":"Cannot call csv2json on ","dataCheckFailure":"CSV is not a string."}},"defaultOptions":{"delimiter":{"field":",","wrap":"\\"","eol":"\\n"},"excelBOM":false,"prependHeader":true,"trimHeaderFields":false,"trimFieldValues":false,"sortHeader":false,"parseCsvNumbers":false,"keys":null,"checkSchemaDifferences":false,"expandArrayObjects":false},"values":{"excelBOM":"\ufeff"}}')},function(e,t,n){"use strict";let r=n(20),o=n(12);const a=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;function i(e){return o.isUndefined(e)||o.isNull(e)||""===e}e.exports={isStringRepresentation:function(e,t){const n=e[0],r=e.length-1,o=e[r];return n===t.delimiter.wrap&&o===t.delimiter.wrap},isDateRepresentation:function(e){return a.test(e)},computeSchemaDifferences:function(e,t){return o.difference(e,t).concat(o.difference(t,e))},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},convert:function(e){let{options:t,callback:n}=function(e,t){if(o.isObject(e)&&!o.isFunction(e))return{options:e,callback:t};return{options:t,callback:e}}(e.callback,e.options);a=t,(a=o.defaults(a||{},r.defaultOptions)).delimiter=o.defaults(a.delimiter,r.defaultOptions.delimiter),t=a;var a;let i=new e.converter(t);(function(e){if(!e.callback)throw new Error(r.errors.callbackRequired);if(!e.data)return e.callback(new Error(e.errorMessages.cannotCallOn+e.data+".")),!1;if(!e.dataCheckFn(e.data))return e.callback(new Error(e.errorMessages.dataCheckFailure)),!1;return!0})({data:e.data,callback:n,errorMessages:i.validationMessages,dataCheckFn:i.validationFn})&&i.convert(e.data,n)},isEmptyField:i,removeEmptyFields:function(e){return o.filter(e,e=>!i(e))},getNCharacters:function(e,t,n){return e.substring(t,t+n)}}},,function(e,t,n){"use strict";function r(e){let t=e.indexOf(".");return{indexOfDot:t,currentKey:e.slice(0,t>=0?t:void 0),remainingKeyPath:e.slice(t+1)}}e.exports={evaluatePath:function e(t,n){if(!t)return null;let{indexOfDot:o,currentKey:a,remainingKeyPath:i}=r(n);if(o>=0&&!t[n])return Array.isArray(t[a])?t[a].map(t=>e(t,i)):e(t[a],i);if(Array.isArray(t))return t.map(t=>e(t,n));return t[n]},setPath:function e(t,n,o){if(!t)throw new Error("No document was provided.");let{indexOfDot:a,currentKey:i,remainingKeyPath:s}=r(n);if(a>=0){if(!t[i]&&Array.isArray(t))return t.forEach(t=>e(t,n,o));t[i]||(t[i]={}),e(t[i],s,o)}else{if(Array.isArray(t))return t.forEach(t=>e(t,s,o));t[n]=o}return t}}},,,function(e,t,n){"use strict";let r=n(20),o=n(21),a=n(12),i=n(23),s=n(28);e.exports={Json2Csv:function(e){const t=new RegExp(e.delimiter.wrap,"g"),n=/\r?\n|\r/,c={expandArrayObjects:e.expandArrayObjects,ignoreEmptyArraysWhenExpanding:e.expandArrayObjects};function l(t){if(e.checkSchemaDifferences)return function(e){let t=e[0],n=e.slice(1);if(function(e,t){return t.reduce((t,n)=>o.computeSchemaDifferences(e,n).length>0?t+1:t,0)}(t,n))return Promise.reject(new Error(r.errors.json2csv.notSameSchema));return Promise.resolve(t)}(t);{let e=a.uniq(a.flatten(t));return Promise.resolve(e)}}function u(t){return e.sortHeader?t.sort():t}function f(t){return e.trimHeaderFields&&(t.headerFields=t.headerFields.map(e=>e.split(".").map(e=>e.trim()).join("."))),t}function d(t){return e.prependHeader&&(t.headerFields=t.headerFields.map((function(e){return g(e)}))),t}function p(t){return t.header=t.headerFields.join(e.delimiter.field),t}function h(t){return e.keys?Promise.resolve(e.keys).then(u):function(e){return Promise.resolve(s.deepKeysFromList(e,c))}(t).then(l).then(u)}function m(t){return t.records=t.records.map(n=>{let r=function(t,n){let r=[];return n.forEach(n=>{let s=i.evaluatePath(t,n);!a.isUndefined(e.emptyFieldValue)&&o.isEmptyField(s)?s=e.emptyFieldValue:e.expandArrayObjects&&Array.isArray(s)&&(s=function(t){let n=o.removeEmptyFields(t);if(!t.length||!n.length)return e.emptyFieldValue||"";if(1===n.length)return n[0];return t}(s)),r.push(s)}),r}(n,t.headerFields).map(e=>e=g(e=function(e){return a.isArray(e)||a.isObject(e)&&!a.isDate(e)?JSON.stringify(e):a.isUndefined(e)?"undefined":a.isNull(e)?"null":e.toString()}(e=b(e))));return r.join(e.delimiter.field)}).join(e.delimiter.eol),t}function b(t){return e.trimFieldValues?a.isArray(t)?t.map(b):a.isString(t)?t.trim():t:t}function g(r){const o=e.delimiter.wrap;return r.includes(e.delimiter.wrap)&&(r=r.replace(t,o+o)),(r.includes(e.delimiter.field)||r.includes(e.delimiter.wrap)||r.match(n))&&(r=o+r+o),r}function v(t){let n=t.header,o=t.records,a=(e.excelBOM?r.values.excelBOM:"")+(e.prependHeader?n+e.delimiter.eol:"")+o;return t.callback(null,a)}return{convert:function(e,t){a.isObject(e)&&!e.length&&(e=[e]),h(e).then(n=>({headerFields:n,callback:t,records:e})).then(m).then(d).then(f).then(p).then(v).catch(t)},validationFn:a.isObject,validationMessages:r.errors.json2csv}}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";const r=n(12);function o(e,t){return t=s(t),r.isObject(e)?function e(t,n,o){let s=Object.keys(n).map(s=>{let c=i(t,s);return l=n[s],r.isObject(l)&&!r.isNull(l)&&!Array.isArray(l)&&Object.keys(l).length?e(c,n[s],o):o.expandArrayObjects&&function(e){return Array.isArray(e)}(n[s])?function(e,t,n){let o=a(e);return e.length?e.length&&0===r.flatten(o).length?[t]:(o=o.map(e=>{return n=e,Array.isArray(n)&&!n.length?[t]:e.map(e=>i(t,e));var n}),r.uniq(r.flatten(o))):n.ignoreEmptyArraysWhenExpanding?[]:[t]}(n[s],s,o):c;var l});return r.flatten(s)}("",e,t):[]}function a(e,t){return t=s(t),e.map(e=>r.isObject(e)?o(e,t):[])}function i(e,t){return e?e+"."+t:t}function s(e){return r.defaults(e||{},{expandArrayObjects:!1,ignoreEmptyArraysWhenExpanding:!1})}e.exports={deepKeys:o,deepKeysFromList:a}},function(e,t,n){"use strict";let r=n(20),o=n(21),a=n(12),i=n(23);e.exports={Csv2Json:function(e){const t=new RegExp(e.delimiter.wrap+e.delimiter.wrap,"g"),n=new RegExp("^"+r.values.excelBOM);function s(t){return t=p(t),e.trimHeaderFields?t.split(".").map(e=>e.trim()).join("."):t}function c(t){let n={lines:t},r=n.lines[0];return n.headerFields=r.map((e,t)=>({value:s(e),index:t})),e.keys&&(n.headerFields=n.headerFields.filter(t=>e.keys.includes(t.value))),n}function l(t){return Promise.resolve(function(t){let n,r,a,i,s=[],c=[],l=t.length-1,u=e.delimiter.eol.length,f={insideWrapDelimiter:!1,parsingValue:!0,justParsedDoubleQuote:!1,startIndex:0},d=0;for(;d<t.length;){if(n=t[d],r=d?t[d-1]:"",a=d<l?t[d+1]:"",i=o.getNCharacters(t,d,u),(i!==e.delimiter.eol||f.insideWrapDelimiter)&&d!==l||r!==e.delimiter.field)if(d===l||i===e.delimiter.eol&&(!f.insideWrapDelimiter||f.insideWrapDelimiter&&r===e.delimiter.wrap&&!f.justParsedDoubleQuote)){let n=d!==l||r===e.delimiter.wrap?d:void 0;c.push(t.substring(f.startIndex,n)),s.push(c),c=[],f.startIndex=d+u,f.parsingValue=!0,f.insideWrapDelimiter=a===e.delimiter.wrap}else if((r!==e.delimiter.wrap||f.justParsedDoubleQuote&&r===e.delimiter.wrap)&&n===e.delimiter.wrap&&o.getNCharacters(t,d+1,u)===e.delimiter.eol)f.insideWrapDelimiter=!1,f.parsingValue=!1;else if(n!==e.delimiter.wrap||0!==d&&o.getNCharacters(t,d-1,u)!==e.delimiter.eol)if(n===e.delimiter.wrap&&a===e.delimiter.field)c.push(t.substring(f.startIndex,d+1)),f.startIndex=d+2,f.insideWrapDelimiter=!1,f.parsingValue=!1;else if(n!==e.delimiter.wrap||r!==e.delimiter.field||f.insideWrapDelimiter||f.parsingValue)if(n===e.delimiter.wrap&&r===e.delimiter.field&&!f.insideWrapDelimiter&&f.parsingValue)c.push(t.substring(f.startIndex,d-1)),f.insideWrapDelimiter=!0,f.parsingValue=!0,f.startIndex=d;else{if(n===e.delimiter.wrap&&a===e.delimiter.wrap){d+=2,f.justParsedDoubleQuote=!0;continue}n===e.delimiter.field&&r!==e.delimiter.wrap&&a!==e.delimiter.wrap&&!f.insideWrapDelimiter&&f.parsingValue?(c.push(t.substring(f.startIndex,d)),f.startIndex=d+1):n!==e.delimiter.field||r!==e.delimiter.wrap||a===e.delimiter.wrap||f.parsingValue||(f.insideWrapDelimiter=!1,f.parsingValue=!0,f.startIndex=d+1)}else f.startIndex=d,f.insideWrapDelimiter=!0,f.parsingValue=!0;else f.insideWrapDelimiter=!0,f.parsingValue=!0,f.startIndex=d;else{let n=i===e.delimiter.eol&&f.startIndex===d?"":t.substr(f.startIndex);c.push(n),c.push(""),s.push(c),c=[],f.startIndex=d+u,f.parsingValue=!0,f.insideWrapDelimiter=a===e.delimiter.wrap}d++,f.justParsedDoubleQuote=!1}return s}(t))}function u(e){return e.recordLines=e.lines.splice(1),e}function f(t,n){return function(t){let n=function(t){try{if(o.isStringRepresentation(t,e)&&!o.isDateRepresentation(t))return t;let n=JSON.parse(t);return a.isArray(n)?n.map(d):n}catch(e){return e}}(t);a.isError(n)?"undefined"===t&&(t=void 0):t=n;return t}(t[n.index])}function d(t){return e.trimFieldValues&&!a.isNull(t)?t.trim():t}function p(t){let n=t[0],r=t.length-1,o=t[r];return n===e.delimiter.wrap&&o===e.delimiter.wrap?t.substr(1,r-1):t}function h(n){return n.json=n.recordLines.reduce((r,o)=>{o=o.map(n=>n=d(n=function(n){return n.replace(t,e.delimiter.wrap)}(n=p(n))));let a=function(e,t){return e.reduce((e,n)=>{let r=f(t,n);return i.setPath(e,n.value,r)},{})}(n.headerFields,o);return r.concat(a)},[]),n}return{convert:function(t,r){var o;(o=t,e.excelBOM?Promise.resolve(o.replace(n,"")):Promise.resolve(o)).then(l).then(c).then(u).then(h).then(e=>r(null,e.json)).catch(r)},validationFn:a.isString,validationMessages:r.errors.csv2json}}}},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(2),i=n.n(a),s=(n(13),n(7),n(3)),c=n.n(s),l=n(4),u=n.n(l),f=n(8),d=n.n(f),p=n(9),h=n.n(p),m=n(10),b=n.n(m),g=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=d()(this,(e=h()(t)).call.apply(e,[this].concat(o)))).countInTabs=void 0,n.urlBaseCache=void 0,n}var n,r,a,s,l,f,p,m,g,v,y;return b()(t,e),u()(t,[{key:"getCountInTabs",value:(y=i()(o.a.mark((function e(){var t,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.countInTabs&&!0!==t){e.next=7;break}return this.setStatusLoading("the count of items"),e.next=5,this.callAPI("/footage/count_in_tabs");case 5:this.countInTabs=e.sent,console.debug("The countInTabs is: ",this.countInTabs);case 7:return e.abrupt("return",this.countInTabs);case 8:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"gatherFootageData",value:(v=i()(o.a.mark((function e(){var t,n,r,a,i,s,c,l,u,f,d,p,h,m,b=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:"contribute",n=this.getMemberId(),r=200,a=this.getAPICallHeaders("GET"),i=[],this.setStatusLoading("the ".concat(t," results")),e.next=8,this.getCountInTabs();case 8:s={contribute:{totalRecords:this.countInTabs.countContributeFootages,apiType:"contribute/footage",apiPost:""},curation:{totalRecords:this.countInTabs.countCurationFootages,apiType:"curationFootage",apiPost:""},content:{totalRecords:this.countInTabs.countContentFootages,apiType:"content/footage",apiPost:"&contentFilter=O"}},c=s[t].totalRecords,l=s[t].apiType,u=Math.ceil(c/r),console.debug({type:t,totalRecords:c,apiType:l,pagesNeeded:u}),f=1;case 14:if(!(f<=u)){e.next=34;break}return d=(f-1)*r+1,this.setStatusLoading("the ".concat(t," items. Page ").concat(f," of ").concat(u)),p="https://portal.blackbox.global/api/member/".concat(n,"/").concat(l,"?index=").concat(d,"&limit=").concat(r).concat(s[t].apiPost),e.next=20,fetch(p,a);case 20:if(!(h=e.sent).ok){e.next=28;break}return e.next=24,h.json();case 24:(m=e.sent)&&m.data&&m.data.list&&m.data.list.length?i=[].concat(i,m.data.list):m&&m.list&&m.list.length&&(i=[].concat(i,m.list)),e.next=31;break;case 28:return this.setStatusError("Unable to access a copy of your ".concat(t," footage information")),console.error("Unable to access a copy of your ".concat(t," footage information. Page ").concat(f," of ").concat(u,". URL: ").concat(p),h),e.abrupt("return",i);case 31:f++,e.next=14;break;case 34:return this.setStatusProcessing("the ".concat(i.length," ").concat(t," entries")),e.abrupt("return",i);case 36:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getAllFootage",value:(g=i()(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.abrupt("return",new Promise((function(e,r){n.getCountInTabs().then((function(){var r=n.gatherFootageData("contribute").then((function(e){t.contribute=e,console.debug("The contribue footage contains ".concat(e.length," entries"))})),o=n.gatherFootageData("curation").then((function(e){t.curation=e})),a=n.gatherFootageData("content").then((function(e){t.content=e}));Promise.all([r,o,a]).then((function(r){console.debug("The footages data is: ",t),n.addMessage("<p>All Footage data loaded</p>"),e(t)}))}))})));case 2:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)})},{key:"getAllFinancials",value:(m=i()(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.setStatusLoading("financial data"),e.abrupt("return",new Promise((function(e,r){var o=n.getFinancialSummaryInfo().then((function(e){t.financialSummaryInfo=e,console.debug("The financialSummaryInfo contains ".concat(e.length," entries"))})),a=n.getFinancialEarningsSummary().then((function(e){t.financialEarningsSummary=e,console.debug("The getFinancialEarningsSummary contains ".concat(e.length," entries"))})),i=n.getUnpaidEarnings().then((function(e){t.unpaidEarnings=e})),s=n.getFinancialPaymentHistory().then((function(e){t.financialPaymentHistory=e})),c=n.getFinancialTotalEarningsReport().then((function(e){t.financialTotalEarningsReport=e}));Promise.all([o,a,i,s,c]).then((function(r){console.debug("The blackBoxPlusFinancials data char length is ",JSON.stringify(t).length),n.addMessage("<p>All Financial data loaded</p>"),e(t)}))})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getFinancialSummaryInfo",value:(p=i()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callAPI("/summaryInfo"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getFinancialEarningsSummary",value:(f=i()(o.a.mark((function e(){var t,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:"2017-01-01%2000:00:00",t=t||this.getFormattedDate("{Y}-{M}-{D}")+"%2023:59:59",e.abrupt("return",this.callAPI("/earningSummary?fromDate=".concat(n,"&toDate=").concat(t)));case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getUnpaidEarnings",value:(l=i()(o.a.mark((function e(){var t,n,r,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,n=a.length>1&&void 0!==a[1]?a[1]:null,(r=n||new Date).setMonth(r.getMonth()-1),r.setDate(0),t=t||this.getFormattedDate("{Y}-{M}-{D}")+"%2023:59:59",n=n||this.getFormattedDate("{Y}-{M}-{D}",r)+"%2000:00:00",e.abrupt("return",this.callAPI("/revenue?fromDate=".concat(n,"&toDate=").concat(t,"&index=1&limit=500")));case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getFinancialPaymentHistory",value:(s=i()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callPaginatedAPI("/paymentHistory?"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getFinancialTotalEarningsReport",value:(a=i()(o.a.mark((function e(){var t,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=r.length>1&&void 0!==r[1]?r[1]:"2017-01-01%2000:00:00",t=t||this.getFormattedDate("{Y}-{M}-{D}")+"%2023:59:59",e.abrupt("return",this.callPaginatedAPI("/earningsReport?fromDate=".concat(n,"&toDate=").concat(t,"&")));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"callAPI",value:(r=i()(o.a.mark((function e(t){var n,r,a,i,s,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"GET",this.setStatusLoading("Making a call to ".concat(t)),r=this.getAPICallHeaders(n),a="".concat(this.urlBase).concat(t),e.next=6,fetch(a,r);case 6:if(!(i=e.sent).ok){e.next=13;break}return e.next=10,i.json();case 10:return e.abrupt("return",e.sent);case 13:throw this.setStatusError("trying to make an API call to ".concat(t)),this.addFlashMessage("Error trying to make an API call to ".concat(t)),s="No OK response from the API. Got the HTTP status ".concat(i.status," when doing a ").concat(n," request to ").concat(a),console.log(s,{url:a,uri:t,response:i,headers:r}),new Error(s);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"callPaginatedAPI",value:(n=i()(o.a.mark((function e(t){var n,r,a,i,s,c,l,u,f,d,p=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:"GET",r=p.length>2&&void 0!==p[2]?p[2]:2,a=1,i=1,this.setStatusLoading("items from ".concat(t,". Page ").concat(i)),s="".concat(t,"index=").concat(a,"&limit=").concat(r),e.next=8,this.callAPI(s,n);case 8:c=e.sent,console.debug("The first paginated call to ".concat(t),{uri:t,paginatedUri:s,method:n,response:c}),l=[],u=1,f=0,c.items&&(l=[].concat(l,c.items)),c.list&&(l=[].concat(l,c.list)),c.pageInfo&&c.pageInfo.totalRecords&&(f=c.pageInfo.totalRecords,u=Math.ceil(f/r)),i=2;case 17:if(!(i<=u)){e.next=30;break}return d=(i-1)*r+1,this.setStatusLoading("items from ".concat(t,". Page ").concat(i," of ").concat(u)),s="".concat(t,"?index=").concat(d,"&limit=").concat(r),console.debug("About to make the ".concat(i," paginated call to ").concat(t),{uri:t,paginatedUri:s,pagesNeeded:u,totalRecords:f}),e.next=24,this.callAPI(s,n);case 24:(c=e.sent).items&&(l=[].concat(l,c.items)),c.list&&(l=[].concat(l,c.list));case 27:i++,e.next=17;break;case 30:return e.abrupt("return",l);case 31:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"makeLinkElementDownload",value:function(e,t,n,r){var o=new Blob([t],{type:r});return e.href=URL.createObjectURL(o),e.download=n,e}},{key:"makeLinkElementDownloadJson",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BlackBox.json";return this.makeLinkElementDownload(e,JSON.stringify(t,null,2),n+".json","application/json")}},{key:"makeLinkElementDownloadCsv",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BlackBox.json";return this.makeLinkElementDownload(e,t,n+".csv","text/csv")}},{key:"createDownloadLinkElement",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=document.createElement("a"),a=new Blob([e],{type:n});return o.href=URL.createObjectURL(a),o.download=t,o.innerText=t,!0===r&&o.click(),o}},{key:"urlBase",get:function(){if(this.urlBaseCache)return this.urlBaseCache;var e=this.getMemberId();return this.urlBaseCache="https://portal.blackbox.global/api/member/".concat(e)}}]),t}(n(11).a),v=n(5),y=new g("Data Exporter");window.blackBoxPlusExport=y,console.debug("Configuring BlackBox Plus"),y.setHeader("BB+ Exporter"),y.setStatusLoading("Initial Setup"),i()(o.a.mark((function e(){var t,n,r,a,i,s,c,l,u,f,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.blackBoxPlusFootage){e.next=4;break}return e.next=3,y.getAllFootage();case 3:window.blackBoxPlusFootage=e.sent;case 4:if(window.blackBoxPlusFinancials){e.next=8;break}return e.next=7,y.getAllFinancials();case 7:window.blackBoxPlusFinancials=e.sent;case 8:return y.setStatusProcessing("the creation of CSV files"),t='href="#" class="bbox_plus_download_link bbox_plus_download_json"',n='href="#" class="bbox_plus_download_link bbox_plus_download_csv"',y.setInterface("<h2>BlackBox Plus - Data Export</h2>\n<p>Click the links below to download the:<br />\n".concat(blackBoxPlusFootage.contribute.length," Workspace Items as <a ").concat(t,' id="bbox_plus_download_workspace_items_contribute_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_workspace_items_contribute_csv">.csv</a><br />\n').concat(blackBoxPlusFootage.curation.length," Curation Items as <a ").concat(t,' id="bbox_plus_download_workspace_items_curation_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_workspace_items_curation_csv">.csv</a><br />\n').concat(blackBoxPlusFootage.content.length," Submitted Content Items as <a ").concat(t,' id="bbox_plus_download_workspace_items_content_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_workspace_items_content_csv">.csv</a><br />\nOr All Footage Items as <a ').concat(t,' id="bbox_plus_download_workspace_items_all_json">.json</a><br />\n<br />\n<h2>Financial Summary</h2>\nEarnings Summary as <a ').concat(t,' id="bbox_plus_download_financial_earnings_summary_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_financial_earnings_summary_csv">.csv</a><br />\nFinancial Summary as <a ').concat(t,' id="bbox_plus_download_financial_summary_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_financial_summary_csv">.csv</a><br />\nFinancial Payment History as <a ').concat(t,' id="bbox_plus_download_financial_payment_history_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_financial_payment_history_csv">.csv</a><br />\nFinancial Total Earnings Report as <a ').concat(t,' id="bbox_plus_download_financial_total_earnings_report_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_financial_total_earnings_report_csv">.csv</a><br />\nUnpaid Earnings List (recently sold but not yet paid) as <a ').concat(t,' id="bbox_plus_download_unpaid_earnings_json">.json</a> as <a ').concat(n,' id="bbox_plus_download_unpaid_earnings_csv">.csv</a><br />\nOr All Financials as <a ').concat(t,' id="bbox_plus_download_financials_all_json">.json</a><br />\n\n</p>')),r={blackBoxPlusFootage:{},blackBoxPlusFinancials:{}},a=Object(v.json2csvAsync)(blackBoxPlusFootage.contribute,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFootage.contribute=e})),i=Object(v.json2csvAsync)(blackBoxPlusFootage.curation,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFootage.curation=e})),s=Object(v.json2csvAsync)(blackBoxPlusFootage.content,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFootage.content=e})),c=Object(v.json2csvAsync)(blackBoxPlusFinancials.financialEarningsSummary.items,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFinancials.financialEarningsSummary=e})),l=Object(v.json2csvAsync)(blackBoxPlusFinancials.financialSummaryInfo,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFinancials.financialSummaryInfo=e})),u=Object(v.json2csvAsync)(blackBoxPlusFinancials.financialPaymentHistory,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFinancials.financialPaymentHistory=e})),f=Object(v.json2csvAsync)(blackBoxPlusFinancials.financialTotalEarningsReport,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFinancials.financialTotalEarningsReport=e})),d=Object(v.json2csvAsync)(blackBoxPlusFinancials.unpaidEarnings.items,{expandArrayObjects:!0}).then((function(e){r.blackBoxPlusFinancials.unpaidEarnings=e})),e.next=23,Promise.all([a,i,s,c,l,u,f,d]);case 23:console.debug("csvData char length is ",JSON.stringify(r).length),p=y.getFormattedDate(),y.makeLinkElementDownloadCsv($("#bbox_plus_download_workspace_items_contribute_csv")[0],r.blackBoxPlusFootage.contribute,"".concat(p," BlackBox Footage - Contribute Workspace Items")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_workspace_items_curation_csv")[0],r.blackBoxPlusFootage.curation,"".concat(p," BlackBox Footage - Curation Items")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_workspace_items_content_csv")[0],r.blackBoxPlusFootage.content,"".concat(p," BlackBox Footage - Processed Submitted Items")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_financial_earnings_summary_csv")[0],r.blackBoxPlusFinancials.financialEarningsSummary,"".concat(p," BlackBox Financials Earnings Summary")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_financial_summary_csv")[0],r.blackBoxPlusFinancials.financialSummaryInfo,"".concat(p," BlackBox Financials Summary Info")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_financial_payment_history_csv")[0],r.blackBoxPlusFinancials.financialPaymentHistory,"".concat(p," BlackBox Financials Payment History")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_financial_total_earnings_report_csv")[0],r.blackBoxPlusFinancials.financialTotalEarningsReport,"".concat(p," BlackBox Financials Total Earnings Report")),y.makeLinkElementDownloadCsv($("#bbox_plus_download_unpaid_earnings_csv")[0],r.blackBoxPlusFinancials.unpaidEarnings,"".concat(p," BlackBox Financials Unpaid Earnings")),y.makeLinkElementDownloadJson($("#bbox_plus_download_workspace_items_contribute_json")[0],blackBoxPlusFootage.contribute,"".concat(p," BlackBox Contribute Workspace Items")),y.makeLinkElementDownloadJson($("#bbox_plus_download_workspace_items_curation_json")[0],blackBoxPlusFootage.curation,"".concat(p," BlackBox Curation Items")),y.makeLinkElementDownloadJson($("#bbox_plus_download_workspace_items_content_json")[0],blackBoxPlusFootage.content,"".concat(p," BlackBox Content Items")),y.makeLinkElementDownloadJson($("#bbox_plus_download_workspace_items_all_json")[0],blackBoxPlusFootage,"".concat(p," BlackBox All Footage Items")),y.makeLinkElementDownloadJson($("#bbox_plus_download_financial_earnings_summary_json")[0],blackBoxPlusFinancials.financialEarningsSummary,"".concat(p," BlackBox Financial Earnings Summary Info")),y.makeLinkElementDownloadJson($("#bbox_plus_download_financial_summary_json")[0],blackBoxPlusFinancials.financialSummaryInfo,"".concat(p," BlackBox Financial Summary Info")),y.makeLinkElementDownloadJson($("#bbox_plus_download_financial_payment_history_json")[0],blackBoxPlusFinancials.financialPaymentHistory,"".concat(p," BlackBox Financial Payment History")),y.makeLinkElementDownloadJson($("#bbox_plus_download_financial_total_earnings_report_json")[0],blackBoxPlusFinancials.financialTotalEarningsReport,"".concat(p," BlackBox Financial Total Earnings Report")),y.makeLinkElementDownloadJson($("#bbox_plus_download_unpaid_earnings_json")[0],blackBoxPlusFinancials.unpaidEarnings,"".concat(p," BlackBox Financial Unpaid Earnings Summary Info")),y.makeLinkElementDownloadJson($("#bbox_plus_download_financials_all_json")[0],blackBoxPlusFinancials,"".concat(p," BlackBox All Financials")),y.setStatusDone('<span onClick="window.scrollTo(0,document.body.scrollHeight);">View the links in the footer</span>'),scrollTo(0,document.body.scrollHeight);case 45:case"end":return e.stop()}}),e)})))()}]);
//# sourceMappingURL=export.js.map