{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/json-2-csv/src/converter.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./src/components/BlackBoxPlusInfo.js","webpack:///./node_modules/underscore/underscore.js","webpack:///./src/styles.less?dc85","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/styles.less","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/json-2-csv/src/utils.js","webpack:///./node_modules/doc-path/src/path.js","webpack:///./node_modules/json-2-csv/src/json2csv.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/deeks/src/deeks.js","webpack:///./node_modules/json-2-csv/src/csv2json.js","webpack:///./src/components/BlackBoxPlusExport.js","webpack:///./src/export.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","Json2Csv","Csv2Json","utils","convert","converter","data","callback","options","convertAsync","deprecatedAsync","deprecatedName","replacementName","console","warn","json2csv","csv2json","json2csvAsync","json","csv2jsonAsync","csv","json2csvPromisified","csv2jsonPromisified","g","Function","e","window","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","obj","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","_typeof","assertThisInitialized","_getPrototypeOf","subClass","superClass","BlackBoxPlusInfo","header","bookmarkletInfoId","idPostfix","infoElement","infoTextElement","infoStatusElement","infoHeaderElement","authToken","memberId","interfaceSection","messagesSection","bbox_m_header_menu_id","bookmarkletInfoElement","document","getElementById","addFlashMessage","insertAdjacentHTML","debug","nav","createFooterSection","setHeader","setInterface","addMessage","footerWrapperElement","footerElement","getElementsByTagName","interfaceSectionContent","$","style","width","html","innerHTML","messageHTML","existingHTML","message","autoRemove","flashElement","createElement","body","insertAdjacentElement","setTimeout","remove","text","colour","color","setStatus","url","script","src","head","appendChild","force","localStorage","token","setStatusError","imageUrl","attr","replace","setStatusLoading","getMemberId","getAuthToken","headers","getDefaultAPICallHeaders","fetch","collaboratedProjectsListResponse","ok","collaboratedProjects","list","setStatusProcessing","element","index","projectName","projectId","status","format","now","Month","Date","getMonth","Mday","getDate","st","MdaySingle","Year","getFullYear","h","getHours","ap","pm","hh","mm","getMinutes","str","frag","createDocumentFragment","elem","childNodes","root","global","previousUnderscore","_","ArrayProto","Array","ObjProto","SymbolProto","nativeIsArray","isArray","nativeKeys","nativeCreate","Ctor","_wrapped","nodeType","VERSION","builtinIteratee","optimizeCb","func","argCount","collection","accumulator","cb","iteratee","identity","isFunction","isObject","matcher","Infinity","restArguments","startIndex","Math","max","rest","baseCreate","shallowProperty","has","path","deepGet","MAX_ARRAY_INDEX","pow","getLength","isArrayLike","each","map","collect","results","currentKey","createReduce","dir","reducer","memo","initial","reduce","foldl","inject","reduceRight","foldr","find","detect","predicate","findIndex","findKey","filter","select","negate","every","all","some","any","contains","includes","include","item","fromIndex","guard","indexOf","contextPath","pluck","where","attrs","findWhere","computed","lastComputed","v","min","shuffle","sample","random","clone","last","rand","temp","sortBy","criteria","sort","left","right","a","b","group","behavior","partition","groupBy","indexBy","countBy","reStrSymbol","toArray","isString","match","size","pass","first","take","array","tail","drop","compact","Boolean","flatten","input","shallow","strict","output","idx","isArguments","j","len","without","otherArrays","difference","uniq","unique","isSorted","isBoolean","seen","union","arrays","intersection","argsLength","unzip","zip","createPredicateIndexFinder","findLastIndex","sortedIndex","low","high","mid","floor","createIndexFinder","predicateFind","lastIndexOf","range","start","step","ceil","chunk","count","executeBound","sourceFunc","boundFunc","callingContext","bound","callArgs","concat","partial","boundArgs","placeholder","position","bindAll","memoize","hasher","cache","address","delay","wait","defer","throttle","timeout","previous","later","leading","throttled","remaining","clearTimeout","trailing","cancel","debounce","immediate","debounced","callNow","wrapper","compose","after","times","before","once","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","collectNonEnumProps","nonEnumIdx","proto","prop","allKeys","mapObject","pairs","invert","functions","methods","names","createAssigner","keysFunc","defaults","source","extend","extendOwn","assign","eq","deepEq","keyInObj","pick","omit","String","tap","interceptor","isMatch","aStack","bStack","className","valueOf","areArrays","aCtor","bCtor","isEqual","isEmpty","isElement","nodelist","Int8Array","isFinite","isSymbol","parseFloat","isNumber","isNull","isUndefined","noConflict","constant","noop","propertyOf","matches","accum","getTime","escapeMap","unescapeMap","createEscaper","escaper","join","testRegexp","RegExp","replaceRegexp","string","test","escape","unescape","fallback","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","escapeRegExp","escapeChar","template","settings","oldSettings","render","offset","variable","argument","chain","_chain","chainResult","mixin","toJSON","api","content","default","exported","locals","isOldIE","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","css","media","sourceMap","references","updater","addStyle","insertStyleElement","attributes","nonce","setAttribute","insert","textStore","replaceText","replacement","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","removeChild","insertBefore","applyToTag","removeAttribute","btoa","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","splice","___CSS_LOADER_API_IMPORT___","useSourceMap","cssMapping","sourceMapping","base64","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","ReferenceError","_setPrototypeOf","constants","dateStringRegex","isEmptyField","fieldValue","isStringRepresentation","firstChar","lastIndex","lastChar","delimiter","isDateRepresentation","computeSchemaDifferences","schemaA","schemaB","deepCopy","parse","params","arg1","arg2","parseArguments","opts","defaultOptions","config","errors","callbackRequired","errorMessages","cannotCallOn","dataCheckFn","dataCheckFailure","validateParameters","validationMessages","validationFn","removeEmptyFields","fields","field","getNCharacters","substring","computeStateInformation","keyPath","indexOfDot","remainingKeyPath","evaluatePath","doc","setPath","deeks","wrapDelimiterCheckRegex","crlfSearchRegex","deeksOptions","expandArrayObjects","ignoreEmptyArraysWhenExpanding","processSchemas","documentSchemas","checkSchemaDifferences","firstDocSchema","restOfDocumentSchemas","schemaDifferences","documentSchema","computeNumberOfSchemaDifferences","notSameSchema","uniqueFieldNames","sortHeaderFields","fieldNames","sortHeader","trimHeaderFields","headerFields","split","component","trim","wrapHeaderFields","prependHeader","headingKey","wrapFieldValueIfNecessary","generateCsvHeader","retrieveHeaderFields","deepKeysFromList","getFieldNameList","processRecords","records","processedRecordData","recordValues","recordFieldValue","emptyFieldValue","filteredRecordFieldValue","processRecordFieldDataForExpandedArrayObject","retrieveRecordFieldData","isDate","recordFieldValueToString","trimRecordFieldValue","eol","trimFieldValues","wrapDelimiter","generateCsvFromComponents","excelBOM","catch","webpackPolyfill","deprecate","paths","children","deepKeys","mergeOptions","generateDeepKeysList","heading","keyName","buildKeyName","val","isArrayToRecurOn","subArray","currentKeyPath","subArrayKeys","schemaKeys","subKey","processArrayKeys","upperKeyName","currentKeyName","escapedWrapDelimiterRegex","excelBOMRegex","processHeaderKey","headerKey","removeWrapDelimitersFromValue","retrieveHeading","lines","headerRow","splitCsvLines","character","charBefore","charAfter","nextNChar","splitLine","lastCharacterIndex","eolDelimiterLength","stateVariables","insideWrapDelimiter","parsingValue","justParsedDoubleQuote","toIndex","parsedValue","substr","splitLines","retrieveRecordLines","recordLines","retrieveRecordValueFromLine","line","parsedJson","trimRecordValue","parseValue","isError","processRecordValue","transformRecordLines","generatedJsonObjects","unescapeWrapDelimiterInField","generatedDocument","createDocument","BlackBoxPlusExport","countInTabs","urlBaseCache","callAPI","limit","getAPICallHeaders","footage","getCountInTabs","typeMapping","contribute","totalRecords","countContributeFootages","apiType","apiPost","curation","countCurationFootages","countContentFootages","pagesNeeded","page","request","requestContent","blackBoxPlusFootage","contributePromise","gatherFootageData","curationPromise","contentPromise","blackBoxPlusFinancials","financialSummaryInfoPromise","getFinancialSummaryInfo","financialSummaryInfo","financialEarningsSummaryPromise","getFinancialEarningsSummary","financialEarningsSummary","getUnpaidEarningsPromise","getUnpaidEarnings","unpaidEarnings","getFinancialPaymentHistoryPromise","getFinancialPaymentHistory","financialPaymentHistory","getFinancialTotalEarningsReportPromise","getFinancialTotalEarningsReport","financialTotalEarningsReport","toDate","fromDate","getFormattedDate","dateMonthAgo","setMonth","setDate","callPaginatedAPI","uri","urlBase","response","errorMessage","log","paginatedUri","items","pageInfo","fileName","contentType","file","Blob","href","URL","createObjectURL","download","jsonContent","makeLinkElementDownload","csvContent","downloadAutomatically","innerText","click","blackBoxPlusExport","getAllFootage","getAllFinancials","linkhrefAndClassesJson","linkhrefAndClassesCsv","csvData","bbox_plus_download_workspace_items_contribute_csv_promise","bbox_plus_download_workspace_items_curation_csv_promise","bbox_plus_download_workspace_items_content_csv_promise","bbox_plus_download_financial_earnings_summary_csv_promise","bbox_plus_download_financial_summary_csv_promise","bbox_plus_download_financial_payment_history_csv_promise","bbox_plus_download_financial_total_earnings_report_csv_promise","bbox_plus_download_unpaid_earnings_csv_promise","dateFormat","makeLinkElementDownloadCsv","makeLinkElementDownloadJson","setStatusDone","scrollTo","scrollHeight"],"mappings":"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","file":"export.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 39);\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","'use strict';\n\nlet {Json2Csv} = require('./json2csv'), // Require our json-2-csv code\n    {Csv2Json} = require('./csv2json'), // Require our csv-2-json code\n    utils = require('./utils');\n\nmodule.exports = {\n    json2csv: (data, callback, options) => convert(Json2Csv, data, callback, options),\n    csv2json: (data, callback, options) => convert(Csv2Json, data, callback, options),\n    json2csvAsync: (json, options) => convertAsync(Json2Csv, json, options),\n    csv2jsonAsync: (csv, options) => convertAsync(Csv2Json, csv, options),\n\n    /**\n     * @deprecated Since v3.0.0\n     */\n    json2csvPromisified: (json, options) => deprecatedAsync(Json2Csv, 'json2csvPromisified()', 'json2csvAsync()', json, options),\n\n    /**\n     * @deprecated Since v3.0.0\n     */\n    csv2jsonPromisified: (csv, options) => deprecatedAsync(Csv2Json, 'csv2jsonPromisified()', 'csv2jsonAsync()', csv, options)\n};\n\n/**\n * Abstracted converter function for json2csv and csv2json functionality\n * Takes in the converter to be used (either Json2Csv or Csv2Json)\n * @param converter\n * @param data\n * @param callback\n * @param options\n */\nfunction convert(converter, data, callback, options) {\n    return utils.convert({\n        data: data,\n        callback,\n        options,\n        converter: converter\n    });\n}\n\n/**\n * Simple way to promisify a callback version of json2csv or csv2json\n * @param converter\n * @param data\n * @param options\n * @returns {Promise<any>}\n */\nfunction convertAsync(converter, data, options) {\n    return new Promise((resolve, reject) => convert(converter, data, (err, data) => {\n        if (err) {\n            return reject(err);\n        }\n        return resolve(data);\n    }, options));\n}\n\n/**\n * Simple way to provide a deprecation warning for previous promisified versions\n * of module functionality.\n * @param converter\n * @param deprecatedName\n * @param replacementName\n * @param data\n * @param options\n * @returns {Promise<any>}\n */\nfunction deprecatedAsync(converter, deprecatedName, replacementName, data, options) {\n    console.warn('WARNING: ' + deprecatedName + ' is deprecated and will be removed soon. Please use ' + replacementName + ' instead.');\n    return convertAsync(converter, data, options);\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","/**\n * =================================================================\n *  The base component\n * =================================================================\n */\nexport default class BlackBoxPlusInfo {\n\n    header = 'BlackBox Plus';\n    bookmarkletInfoId = 'bbox_plus_bookmarklet_info';\n    idPostfix = '';\n    infoElement;\n    infoTextElement;\n    infoStatusElement;\n    infoHeaderElement;\n    authToken;\n    memberId;\n    interfaceSection;\n    messagesSection;\n    bbox_m_header_menu_id = 'm_header_menu';\n\n    constructor(header = '') {\n        // If there's already another bookmarklet initiated then create another\n        let bookmarkletInfoElement = document.getElementById(this.bookmarkletInfoId);\n\n        if (!bookmarkletInfoElement) {\n            console.debug(\"Setting up \" + this.bbox_m_header_menu_id);\n            let nav = document.getElementById(this.bbox_m_header_menu_id);\n            if (!nav) {\n                this.addFlashMessage('Unable to find the Nav Menu, can\\'t add BlackBox, wait until it\\'s loaded and try again', 'error');\n                throw new Error('Unable to find the Nav Menu');\n            }\n            nav.insertAdjacentHTML('afterend', `                   <div id=\"${this.bookmarkletInfoId}\" class=\"bbox_plus_bookmarklet_info_wrapper\" style=\"color: white; float: left; padding-top: 10px; position: absolute; left: 150px; width: 270px;\"><h3 id=\"bbox_plus_header\"                 class=\"bbox_plus_header\">BlackBox Plus</h3><p style=\"color: white\" class=\"bbox_plus_info_text_wrapper\"><strong id=\"bbox_plus_status\"                     style=\"color: red\" class=\"bbox_plus_info_status\">*</strong> &nbsp; <span id=\"bbox_plus_text\"                   class=\"bbox_plus_info_text\">Loading</span></p></div>`);\n            console.debug(\"Setup a Blackbox Plus info\");\n        } else {\n            this.idPostfix = '_2';\n            // There's already a bookmarklet installed, to create a 2nd\n            this.bookmarkletInfoId = 'bbox_plus_bookmarklet_info' + this.idPostfix;\n            if (document.getElementById(this.bookmarkletInfoId)) {\n                // @todo: Display the error better, like in a flash message\n                this.addFlashMessage('Unable to add a 3rd BlackBox Plus system', 'error');\n                throw new Error(\"Unable to add a 3rd BlackBox Plus system\");\n            }\n            bookmarkletInfoElement.insertAdjacentHTML('afterend', `<div id=\"${this.bookmarkletInfoId}\" class=\"bbox_plus_bookmarklet_info_wrapper\" style=\"color: white; float: left; padding-top: 10px; position: absolute; width: 250px; left: 425px;\"><h3 id=\"bbox_plus_header${this.idPostfix}\"  class=\"bbox_plus_header\">BlackBox Plus</h3><p style=\"color: white\" class=\"bbox_plus_info_text_wrapper\"><strong id=\"bbox_plus_status${this.idPostfix}\" style=\"color: red\" class=\"bbox_plus_info_status\">*</strong> &nbsp; <span id=\"bbox_plus_text${this.idPostfix}\"  class=\"bbox_plus_info_text\">Loading</span></p></div>`);\n            console.debug(\"Setup a 2nd Blackbox Plus info\");\n        }\n        this.infoElement = document.getElementById(this.bookmarkletInfoId);\n        this.infoHeaderElement = document.getElementById('bbox_plus_header' + this.idPostfix);\n        this.infoStatusElement = document.getElementById('bbox_plus_status' + this.idPostfix);\n        this.infoTextElement = document.getElementById('bbox_plus_text' + this.idPostfix);\n        this.createFooterSection();\n\n        if (header) {\n            this.setHeader(header);\n            this.setInterface(`<h2>BlackBox Plus ${header}</h2>`);\n        }\n        this.addMessage(`<hr /><h3>Messages</h3><a>You can add this bookmarklet from <a href=\"https://blackboxplus.greyphoenix.biz/\">blackboxplus.greyphoenix.biz</a> and checkout the codebase on <a href=\"https://github.com/kublermdk/BlackBox-Plus\">Github</a></p>`);\n        // this.addMessage('<p>Initial Loading complete</p>');\n    }\n\n    createFooterSection() {\n        // let footer = $('footer')[0];\n        let footerWrapperElement = document.getElementById('bbox_plus_footer_wrapper');\n        let footerElement = document.getElementsByTagName('footer')[0] || null;\n        let interfaceSectionContent = `<div class=\"bbox_plus_interface_wrapper\" style=\"float: left; margin-left: 10px; margin-bottom: 10px;\"><div id=\"bbox_plus_interface_section${this.idPostfix}\"></div><div id=\"bbox_plus_messages_section${this.idPostfix}\"></div></div>`;\n        if (footerElement && footerWrapperElement) {\n            // Already installed before\n            // @todo: Make only 50% of the footer\n            footerWrapperElement.insertAdjacentHTML('beforeend', interfaceSectionContent);\n            $('.bbox_plus_interface_wrapper')[0].style.width = '48%';\n            $('.bbox_plus_interface_wrapper')[1].style.width = '48%';\n        } else if (footerElement) {\n            // Inserting the wrapper as well\n            footerElement.insertAdjacentHTML('afterend', `<div id=\"bbox_plus_footer_wrapper\">${interfaceSectionContent}</div>`);\n        } else {\n            console.error(\"Issue trying to find the <footer> element\");\n            this.addFlashMessage('Unable to find the footer section, wait until the page has fully loaded and try again or refresh', 'error');\n            throw new Error('Unable to create a Footer section, no footer element found');\n        }\n        this.interfaceSection = document.getElementById(`bbox_plus_interface_section${this.idPostfix}`);\n        this.messagesSection = document.getElementById(`bbox_plus_messages_section${this.idPostfix}`);\n    }\n\n    /**\n     * Set Interface\n     *\n     * The section at the bottom of the screen. This allows for buttons and options, etc..\n     * @param html\n     * @returns {boolean}\n     */\n    setInterface(html) {\n        this.interfaceSection.innerHTML = html;\n        return true;\n    }\n\n    /**\n     * Add Message\n     *\n     * This is at the bottom of the page, below the Interface section and is for messages like operations which have been completed, etc..\n     * @param messageHTML\n     * @returns {boolean}\n     */\n    addMessage(messageHTML) {\n        let existingHTML = this.messagesSection.innerHTML || '';\n        this.messagesSection.innerHTML = existingHTML + messageHTML;\n        return true;\n    }\n\n    /**\n     * Type should be one of 'info', 'success', 'warn', 'error'\n     * @param message\n     * @param type\n     */\n    addFlashMessage(message, type, autoRemove = true) {\n        // @todo: Implement something similar to https://www.w3schools.com/howto/howto_js_alert.asp\n        let messageHTML = `<div class=\"bbox_plus bbox_plus_flash_message bbox_plus_flash_message_type_${type}\"><span class=\"bbox_plus_flash_message_closebtn\" onclick=\"this.parentElement.style.display='none';\">&times;</span>${message}</div>`;\n        let flashElement = document.createElement('div');\n        flashElement.innerHTML = messageHTML;\n        document.body.insertAdjacentElement('beforeend', flashElement);\n\n        if (true === autoRemove) {\n            setTimeout(() => {\n                flashElement.remove(); // @todo: fadeout instead\n            }, 6000);\n        }\n        return flashElement;\n    }\n\n    setHeader(header) {\n        this.header = header;\n        this.infoHeaderElement.innerHTML = header;\n    }\n\n    setStatus(text = '', colour = '') {\n        if (text) {\n            this.infoTextElement.innerHTML = text;\n        }\n        if (colour) {\n            this.infoStatusElement.style.color = colour;\n        }\n        console.debug(\"Status: \" + text);\n    }\n\n    setStatusError(context = '') {\n        this.setHeader('ERROR ' + this.header);\n        this.setStatus(`<span style=\"color: red\">ERROR ${context}</span>`, 'red');\n\n        // @todo: Also display as a flash message\n        this.addFlashMessage('Error ' + context, 'error');\n        console.error(\"## ERROR ## \" + context);\n    }\n\n    setStatusLoading(context = '') {\n        this.setStatus('Loading ' + context, 'orange');\n        console.debug(\"Loading: \" + context);\n    }\n\n    setStatusProcessing(context = '') {\n        this.setStatus('Processing ' + context, 'orange');\n        console.debug(\"Processing: \" + context);\n    }\n\n    setStatusDone(context = '') {\n        this.setStatus('Completed ' + context, 'green');\n        console.debug(\"Completed: \" + context);\n    }\n\n\n// c = await fetch('https://cors-anywhere.herokuapp.com/');\n// d = await c.text();\n\n    dynamicallyLoadScript(url) {\n        var script = document.createElement(\"script\");  // create a script DOM node\n        script.type = 'text/javascript';\n        script.src = url;  // set its src to the provided URL\n        document.head.appendChild(script);  // add it to the end of the head section of the page (could change 'head' to 'body' to add it to the end of the body section instead)\n    }\n\n    getAuthToken(force = false) {\n        if (this.authToken && false === force) {\n            return this.authToken;\n        }\n        let authToken = localStorage.token; // Get this by looking at an existing request.\n        if (!authToken) {\n            // $messagesSection.append('<h2 class=\"btn-outline-danger\">Unable to get your authToken. Are you logged in?</h2>');\n            this.setStatusError('Unable to get your auth token, are you logged in?');\n            throw new Error('Error, invalid auth token');\n        }\n        return authToken;\n    }\n\n    getMemberId(force = false) {\n\n        if (this.memberId && false === force) {\n            return this.memberId;\n        }\n        let imageUrl = $('.m-topbar__userpic img').attr('src'); // e.g \"https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/W/avatar?1577006745917\" -> 5afd6163-a82a-4079-8e3b-592c349ae72d\n\n        if (!imageUrl) {\n            this.setStatusError('Do you have an avatar picture? Without it we are unable to work out your BlackBox memberId');\n            throw new Error('Error, Unable to work out your Blackbox MemberId');\n        } else {\n            let memberId = imageUrl.replace('https://portal.blackbox.global/api/member/', '').replace(/\\/W\\/avatar.*/, '');\n            if (memberId) {\n                this.memberId = memberId;\n            } else {\n                this.setStatusError('Unable to work out your BlackBox memberId');\n                throw new Error('Issue trying to work out the memberId based off the avatar image');\n            }\n\n            return memberId;\n        }\n\n\n    }\n\n    async clearMarketplaceCollaborationProjectsList() {\n\n        this.setStatusLoading(`Loading up the Collaboration Projects list`);\n        let memberId = this.getMemberId();\n        let authToken = this.getAuthToken();\n\n        let headers = getDefaultAPICallHeaders('POST');\n        let collaboratedProjectsListResponse = await fetch(`https://portal.blackbox.global/api/member/${memberId}/collaboratedProjects?index=1&limit=100`, headers);\n\n\n        if (collaboratedProjectsListResponse.ok) {\n            // if HTTP-status is 200-299\n            let collaboratedProjects = await collaboratedProjectsListResponse.json();\n            console.debug(`There are ${collaboratedProjects.list.length} Collaboration Project entries `, collaboratedProjects);\n            this.setStatusProcessing(`Clearing the ${collaboratedProjects.list.length} Collaboration Projects`);\n            if (collaboratedProjects.list.length > 0) {\n                headers.method = 'PUT'; // Want to do a PUT call to clear the entries\n                collaboratedProjects.list.forEach((element, index) => {\n                    this.setStatusProcessing(`Clearing #${index} ${element.projectName}`);\n                    // $messagesSection.append('<p class=\"\" data-projectid=\"${element.projectId}\">Clearing the Marketplace Entry #{index} ${element.projectName}</p>');\n                    console.debug(`Clearing the Collab Entry #${index} ${element.projectName}`, element); // Console.log doesn't actually work, they've set it to an empty function\n                    fetch(`https://portal.blackbox.global/api/member/${memberId}/project/${element.projectId}/clearCurationProject`, headers);\n                });\n            }\n\n        } else {\n            this.setStatusError(`Unable to get the list of projects. HTTP-Error: ${collaboratedProjectsListResponse.status}`);\n        }\n    }\n\n    getAPICallHeaders(method = 'GET') {\n        let authToken = this.getAuthToken();\n        return {\n            \"credentials\": \"include\",\n            \"headers\": {\n                \"accept\": \"application/json, text/plain, */*\",\n                \"accept-language\": \"en-AU,en;q=0.9,en-US;q=0.8\",\n                \"cache-control\": \"no-cache\",\n                \"content-type\": \"application/vnd.blackbox.v1+json\",\n                \"pragma\": \"no-cache\",\n                \"sec-fetch-mode\": \"cors\",\n                \"sec-fetch-site\": \"same-origin\",\n                \"timeout\": \"8000\",\n                \"token\": authToken\n            },\n            \"referrer\": \"https://portal.blackbox.global/footage/marketplace?blackbox_plus=true\", // Added a query string so Blackbox can track these queries\n            \"referrerPolicy\": \"no-referrer-when-downgrade\",\n            // \"body\": \"{}\",\n            \"method\": method,\n            \"mode\": \"cors\"\n        };\n    }\n\n\n    getFormattedDate(format = \"{Y}-{M}-{D}{st} {h}_{m}{ap}\", now = null) {\n        // e.g 2012-09-05th 09_02AM Based on https://www.willmaster.com/library/generators/date-and-time-formatting.php using {Y}-{M}-{D} {h}_{m}{ap}\n        // let format = \"{Y}-{M}-{D}{st} {h}_{m}{ap}\";\n        now = now || new Date(); // This current millisecond on user's computer.\n        let Month = '';\n        Month = now.getMonth() + 1;\n        if (Month < 10) {\n            Month = \"0\" + Month;\n        }\n        format = format.replace(/{M}/g, Month);\n\n        // Month Day\n        let Mday = '';\n        Mday = now.getDate();\n        if (Mday < 10) {\n            Mday = \"0\" + Mday;\n        }\n        format = format.replace(/{D}/g, Mday);\n\n\n        // St day suffix (Michael Kubler's custom addition)\n        // e.g 1st, 2nd, 3rd, 4th, 5th ...\n        let st = 'th';\n        let MdaySingle = now.getDate();\n        if (MdaySingle < 4) {\n            if (MdaySingle === 3) {\n                st = 'rd';\n            } else if (MdaySingle === 2) {\n                st = 'nd';\n            } else if (MdaySingle === 1) {\n                st = 'st';\n            }\n        }\n        format = format.replace(/{st}/g, st);\n\n\n        let Year = '';\n        Year = now.getFullYear();\n        format = format.replace(/{Y}/g, Year);\n        let h = now.getHours();\n        let ap = '';\n        let pm = (h > 11);\n        if (h > 12) {\n            h -= 12;\n        }\n        ap = pm ? \"PM\" : \"AM\";\n        format = format.replace(/{ap}/g, ap);\n        let hh = '';\n        if (h < 10) {\n            hh = \"0\" + h;\n        } else {\n            hh = h;\n        }\n        format = format.replace(/{h}/g, hh);\n        let mm = '';\n        mm = now.getMinutes();\n        if (mm < 10) {\n            mm = \"0\" + mm;\n        }\n        format = format.replace(/{m}/g, mm);\n        return format;\n    }\n\n    /**\n     * Based off https://stackoverflow.com/a/3662980/7299352\n     * @param str\n     * @returns {DocumentFragment}\n     */\n    createNewElement( str ) {\n        let frag = document.createDocumentFragment();\n        let elem = document.createElement('div');\n        elem.innerHTML = str;\n        while (elem.childNodes[0]) {\n            frag.appendChild(elem.childNodes[0]);\n        }\n        return frag;\n    }\n\n}","//     Underscore.js 1.9.1\n//     http://underscorejs.org\n//     (c) 2009-2018 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` (`self`) in the browser, `global`\n  // on the server, or `this` in some virtual machines. We use `self`\n  // instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global ||\n            this ||\n            {};\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype;\n  var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push = ArrayProto.push,\n      slice = ArrayProto.slice,\n      toString = ObjProto.toString,\n      hasOwnProperty = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var nativeIsArray = Array.isArray,\n      nativeKeys = Object.keys,\n      nativeCreate = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for their old module API. If we're in\n  // the browser, add `_` as a global object.\n  // (`nodeType` is checked to ensure that `module`\n  // and `exports` are not HTML elements.)\n  if (typeof exports != 'undefined' && !exports.nodeType) {\n    if (typeof module != 'undefined' && !module.nodeType && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.9.1';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      // The 2-argument case is omitted because we’re not using it.\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  var builtinIteratee;\n\n  // An internal function to generate callbacks that can be applied to each\n  // element in a collection, returning the desired result — either `identity`,\n  // an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value) && !_.isArray(value)) return _.matcher(value);\n    return _.property(value);\n  };\n\n  // External wrapper for our callback generator. Users may customize\n  // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n  // This abstraction hides the internal-only argCount argument.\n  _.iteratee = builtinIteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // Some functions take a variable number of arguments, or a few expected\n  // arguments at the beginning and then a variable number of values to operate\n  // on. This helper accumulates all remaining arguments past the function’s\n  // argument length (or an explicit `startIndex`), into an array that becomes\n  // the last argument. Similar to ES6’s \"rest parameter\".\n  var restArguments = function(func, startIndex) {\n    startIndex = startIndex == null ? func.length - 1 : +startIndex;\n    return function() {\n      var length = Math.max(arguments.length - startIndex, 0),\n          rest = Array(length),\n          index = 0;\n      for (; index < length; index++) {\n        rest[index] = arguments[index + startIndex];\n      }\n      switch (startIndex) {\n        case 0: return func.call(this, rest);\n        case 1: return func.call(this, arguments[0], rest);\n        case 2: return func.call(this, arguments[0], arguments[1], rest);\n      }\n      var args = Array(startIndex + 1);\n      for (index = 0; index < startIndex; index++) {\n        args[index] = arguments[index];\n      }\n      args[startIndex] = rest;\n      return func.apply(this, args);\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var shallowProperty = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  var has = function(obj, path) {\n    return obj != null && hasOwnProperty.call(obj, path);\n  }\n\n  var deepGet = function(obj, path) {\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      if (obj == null) return void 0;\n      obj = obj[path[i]];\n    }\n    return length ? obj : void 0;\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object.\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = shallowProperty('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  var createReduce = function(dir) {\n    // Wrap code that reassigns argument variables in a separate function than\n    // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n    var reducer = function(obj, iteratee, memo, initial) {\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      if (!initial) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    };\n\n    return function(obj, iteratee, memo, context) {\n      var initial = arguments.length >= 3;\n      return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n    };\n  };\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;\n    var key = keyFinder(obj, predicate, context);\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = restArguments(function(obj, path, args) {\n    var contextPath, func;\n    if (_.isFunction(path)) {\n      func = path;\n    } else if (_.isArray(path)) {\n      contextPath = path.slice(0, -1);\n      path = path[path.length - 1];\n    }\n    return _.map(obj, function(context) {\n      var method = func;\n      if (!method) {\n        if (contextPath && contextPath.length) {\n          context = deepGet(context, contextPath);\n        }\n        if (context == null) return void 0;\n        method = context[path];\n      }\n      return method == null ? method : method.apply(context, args);\n    });\n  });\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection.\n  _.shuffle = function(obj) {\n    return _.sample(obj, Infinity);\n  };\n\n  // Sample **n** random values from a collection using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n    var length = getLength(sample);\n    n = Math.max(Math.min(n, length), 0);\n    var last = length - 1;\n    for (var index = 0; index < n; index++) {\n      var rand = _.random(index, last);\n      var temp = sample[index];\n      sample[index] = sample[rand];\n      sample[rand] = temp;\n    }\n    return sample.slice(0, n);\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    var index = 0;\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, key, list) {\n      return {\n        value: value,\n        index: index++,\n        criteria: iteratee(value, key, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior, partition) {\n    return function(obj, iteratee, context) {\n      var result = partition ? [[], []] : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (_.isString(obj)) {\n      // Keep surrogate pair characters together\n      return obj.match(reStrSymbol);\n    }\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = group(function(result, value, pass) {\n    result[pass ? 0 : 1].push(value);\n  }, true);\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, Boolean);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, output) {\n    output = output || [];\n    var idx = output.length;\n    for (var i = 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        // Flatten current level of array or arguments object.\n        if (shallow) {\n          var j = 0, len = value.length;\n          while (j < len) output[idx++] = value[j++];\n        } else {\n          flatten(value, shallow, strict, output);\n          idx = output.length;\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = restArguments(function(array, otherArrays) {\n    return _.difference(array, otherArrays);\n  });\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // The faster algorithm will not work with an iteratee if the iteratee\n  // is not a one-to-one function, so providing an iteratee will disable\n  // the faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted && !iteratee) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = restArguments(function(arrays) {\n    return _.uniq(flatten(arrays, true, true));\n  });\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      var j;\n      for (j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = restArguments(function(array, rest) {\n    rest = flatten(rest, true, true);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  });\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices.\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = restArguments(_.unzip);\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values. Passing by pairs is the reverse of _.pairs.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions.\n  var createPredicateIndexFinder = function(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  };\n\n  // Returns the first index on an array-like that passes a predicate test.\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions.\n  var createIndexFinder = function(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n          i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n          length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  };\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    if (!step) {\n      step = stop < start ? -1 : 1;\n    }\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Chunk a single array into multiple arrays, each containing `count` or fewer\n  // items.\n  _.chunk = function(array, count) {\n    if (count == null || count < 1) return [];\n    var result = [];\n    var i = 0, length = array.length;\n    while (i < length) {\n      result.push(slice.call(array, i, i += count));\n    }\n    return result;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments.\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = restArguments(function(func, context, args) {\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var bound = restArguments(function(callArgs) {\n      return executeBound(func, bound, context, this, args.concat(callArgs));\n    });\n    return bound;\n  });\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder by default, allowing any combination of arguments to be\n  // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\n  _.partial = restArguments(function(func, boundArgs) {\n    var placeholder = _.partial.placeholder;\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  });\n\n  _.partial.placeholder = _;\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = restArguments(function(obj, keys) {\n    keys = flatten(keys, false, false);\n    var index = keys.length;\n    if (index < 1) throw new Error('bindAll must be passed function names');\n    while (index--) {\n      var key = keys[index];\n      obj[key] = _.bind(obj[key], obj);\n    }\n  });\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = restArguments(function(func, wait, args) {\n    return setTimeout(function() {\n      return func.apply(null, args);\n    }, wait);\n  });\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, result;\n\n    var later = function(context, args) {\n      timeout = null;\n      if (args) result = func.apply(context, args);\n    };\n\n    var debounced = restArguments(function(args) {\n      if (timeout) clearTimeout(timeout);\n      if (immediate) {\n        var callNow = !timeout;\n        timeout = setTimeout(later, wait);\n        if (callNow) result = func.apply(this, args);\n      } else {\n        timeout = _.delay(later, wait, this, args);\n      }\n\n      return result;\n    });\n\n    debounced.cancel = function() {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n\n    return debounced;\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  _.restArguments = restArguments;\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n    'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  var collectNonEnumProps = function(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  };\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`.\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object.\n  // In contrast to _.map it returns an object.\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = _.keys(obj),\n        length = keys.length,\n        results = {};\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys[index];\n      results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  // The opposite of _.object.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`.\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, defaults) {\n    return function(obj) {\n      var length = arguments.length;\n      if (defaults) obj = Object(obj);\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!defaults || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s).\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test.\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Internal pick helper function to determine if `obj` has key `key`.\n  var keyInObj = function(value, key, obj) {\n    return key in obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = restArguments(function(obj, keys) {\n    var result = {}, iteratee = keys[0];\n    if (obj == null) return result;\n    if (_.isFunction(iteratee)) {\n      if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n      keys = _.allKeys(obj);\n    } else {\n      iteratee = keyInObj;\n      keys = flatten(keys, false, false);\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  });\n\n  // Return a copy of the object without the blacklisted properties.\n  _.omit = restArguments(function(obj, keys) {\n    var iteratee = keys[0], context;\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n      if (keys.length > 1) context = keys[1];\n    } else {\n      keys = _.map(flatten(keys, false, false), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  });\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq, deepEq;\n  eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // `null` or `undefined` only equal to itself (strict comparison).\n    if (a == null || b == null) return false;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a) return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n    return deepEq(a, b, aStack, bStack);\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  deepEq = function(a, b, aStack, bStack) {\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN.\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n      case '[object Symbol]':\n        return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\n  var nodelist = root.document && root.document.childNodes;\n  if (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`?\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && isNaN(obj);\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, path) {\n    if (!_.isArray(path)) {\n      return has(obj, path);\n    }\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      var key = path[i];\n      if (obj == null || !hasOwnProperty.call(obj, key)) {\n        return false;\n      }\n      obj = obj[key];\n    }\n    return !!length;\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  // Creates a function that, when passed an object, will traverse that object’s\n  // properties down the given `path`, specified as an array of keys or indexes.\n  _.property = function(path) {\n    if (!_.isArray(path)) {\n      return shallowProperty(path);\n    }\n    return function(obj) {\n      return deepGet(obj, path);\n    };\n  };\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    if (obj == null) {\n      return function(){};\n    }\n    return function(path) {\n      return !_.isArray(path) ? obj[path] : deepGet(obj, path);\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n  // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped.\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // Traverses the children of `obj` along `path`. If a child is a function, it\n  // is invoked with its parent as context. Returns the value of the final\n  // child, or `fallback` if any child is undefined.\n  _.result = function(obj, path, fallback) {\n    if (!_.isArray(path)) path = [path];\n    var length = path.length;\n    if (!length) {\n      return _.isFunction(fallback) ? fallback.call(obj) : fallback;\n    }\n    for (var i = 0; i < length; i++) {\n      var prop = obj == null ? void 0 : obj[path[i]];\n      if (prop === void 0) {\n        prop = fallback;\n        i = length; // Ensure we don't continue iterating.\n      }\n      obj = _.isFunction(prop) ? prop.call(obj) : prop;\n    }\n    return obj;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offset.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    var render;\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var chainResult = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return chainResult(this, func.apply(_, args));\n      };\n    });\n    return _;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return chainResult(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return chainResult(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return String(this._wrapped);\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define == 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}());\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./styles.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".bbox_plus_info_text {\\n  text-shadow: 2px 2px 2px grey;\\n}\\n/* The alert message box */\\n.bbox_plus_flash_message {\\n  position: fixed;\\n  top: 200px;\\n  left: 20px;\\n  width: 200px;\\n  display: block;\\n  z-index: 9999;\\n  padding: 10px;\\n  border-radius: 6px;\\n  color: white;\\n  background: rgba(244, 67, 54, 0.8);\\n  border: 2px solid red;\\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);\\n}\\n.bbox_plus_flash_message_type_info {\\n  color: #31708f;\\n  background: rgba(217, 237, 247, 0.9);\\n  border-color: #c6dbe6;\\n}\\n.bbox_plus_flash_message_type_success {\\n  color: darkgreen;\\n  background: rgba(144, 238, 144, 0.9);\\n  border: darkgreen;\\n}\\n.bbox_plus_flash_message_type_warn {\\n  color: #9F6000;\\n  border-color: #9F6000;\\n  background: rgba(254, 239, 179, 0.9);\\n}\\n.bbox_plus_flash_message_type_error {\\n  color: #D8000C;\\n  background: rgba(255, 186, 186, 0.9);\\n  border-color: red;\\n}\\n/* The close button */\\n.bbox_plus_flash_message_closebtn {\\n  margin-left: 15px;\\n  color: black;\\n  font-weight: bold;\\n  float: right;\\n  font-size: 22px;\\n  line-height: 20px;\\n  cursor: pointer;\\n  transition: 0.3s;\\n}\\n.bbox_plus_flash_message_closebtn:hover {\\n  color: black;\\n  font-size: 27px;\\n}\\n.bbox_plus_download_link {\\n  font-weight: bold;\\n}\\n.bbox_plus_button,\\n.bbox_plus button {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","'use strict';\n\nlet constants = require('./constants.json'),\n    _ = require('underscore');\n\nconst dateStringRegex = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/;\n\nmodule.exports = {\n    isStringRepresentation,\n    isDateRepresentation,\n    computeSchemaDifferences,\n    deepCopy,\n    convert,\n    isEmptyField,\n    removeEmptyFields,\n    getNCharacters\n};\n\n/**\n * Build the options to be passed to the appropriate function\n * If a user does not provide custom options, then we use our default\n * If options are provided, then we set each valid key that was passed\n * @param opts {Object} options object\n * @return {Object} options object\n */\nfunction buildOptions(opts) {\n    opts = _.defaults(opts || {}, constants.defaultOptions);\n\n    // Note: _.defaults does a shallow default, we need to deep copy the DELIMITER object\n    opts.delimiter = _.defaults(opts.delimiter, constants.defaultOptions.delimiter);\n\n    // Otherwise, send the options back\n    return opts;\n}\n\n/**\n * When promisified, the callback and options argument ordering is swapped, so\n * this function is intended to determine which argument is which and return\n * them in the correct order\n * @param arg1 {Object|Function} options or callback\n * @param arg2 {Object|Function} options or callback\n */\nfunction parseArguments(arg1, arg2) {\n    // If this was promisified (callback and opts are swapped) then fix the argument order.\n    if (_.isObject(arg1) && !_.isFunction(arg1)) {\n        return {\n            options: arg1,\n            callback: arg2\n        };\n    }\n    // Regular ordering where the callback is provided before the options object\n    return {\n        options: arg2,\n        callback: arg1\n    };\n}\n\n/**\n * Validates the parameters passed in to json2csv and csv2json\n * @param config {Object} of the form: { data: {Any}, callback: {Function}, dataCheckFn: Function, errorMessages: {Object} }\n */\nfunction validateParameters(config) {\n    // If a callback wasn't provided, throw an error\n    if (!config.callback) {\n        throw new Error(constants.errors.callbackRequired);\n    }\n\n    // If we don't receive data, report an error\n    if (!config.data) {\n        config.callback(new Error(config.errorMessages.cannotCallOn + config.data + '.'));\n        return false;\n    }\n\n    // The data provided data does not meet the type check requirement\n    if (!config.dataCheckFn(config.data)) {\n        config.callback(new Error(config.errorMessages.dataCheckFailure));\n        return false;\n    }\n\n    // If we didn't hit any known error conditions, then the data is so far determined to be valid\n    // Note: json2csv/csv2json may perform additional validity checks on the data\n    return true;\n}\n\n/**\n * Abstracted function to perform the conversion of json-->csv or csv-->json\n * depending on the converter class that is passed via the params object\n * @param params {Object}\n */\nfunction convert(params) {\n    let {options, callback} = parseArguments(params.callback, params.options);\n    options = buildOptions(options);\n\n    let converter = new params.converter(options),\n\n        // Validate the parameters before calling the converter's convert function\n        valid = validateParameters({\n            data: params.data,\n            callback,\n            errorMessages: converter.validationMessages,\n            dataCheckFn: converter.validationFn\n        });\n\n    if (valid) converter.convert(params.data, callback);\n}\n\n/**\n * Utility function to deep copy an object, used by the module tests\n * @param obj\n * @returns {any}\n */\nfunction deepCopy(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Helper function that determines whether the provided value is a representation\n *   of a string. Given the RFC4180 requirements, that means that the value is\n *   wrapped in value wrap delimiters (usually a quotation mark on each side).\n * @param fieldValue\n * @param options\n * @returns {boolean}\n */\nfunction isStringRepresentation(fieldValue, options) {\n    const firstChar = fieldValue[0],\n        lastIndex = fieldValue.length - 1,\n        lastChar = fieldValue[lastIndex];\n\n    // If the field starts and ends with a wrap delimiter\n    return firstChar === options.delimiter.wrap && lastChar === options.delimiter.wrap;\n}\n\n/**\n * Helper function that determines whether the provided value is a representation\n *   of a date.\n * @param fieldValue\n * @returns {boolean}\n */\nfunction isDateRepresentation(fieldValue) {\n    return dateStringRegex.test(fieldValue);\n}\n\n/**\n * Helper function that determines the schema differences between two objects.\n * @param schemaA\n * @param schemaB\n * @returns {*}\n */\nfunction computeSchemaDifferences(schemaA, schemaB) {\n    return _.difference(schemaA, schemaB)\n        .concat(_.difference(schemaB, schemaA));\n}\n\n/**\n * Utility function to check if a field is considered empty so that the emptyFieldValue can be used instead\n * @param fieldValue\n * @returns {boolean}\n */\nfunction isEmptyField(fieldValue) {\n    return _.isUndefined(fieldValue) || _.isNull(fieldValue) || fieldValue === '';\n}\n\n/**\n * Helper function that removes empty field values from an array.\n * @param fields\n * @returns {Array}\n */\nfunction removeEmptyFields(fields) {\n    return _.filter(fields, (field) => !isEmptyField(field));\n}\n\n/**\n * Helper function that retrieves the next n characters from the start index in\n *   the string including the character at the start index. This is used to\n *   check if are currently at an EOL value, since it could be multiple\n *   characters in length (eg. '\\r\\n')\n * @param str\n * @param start\n * @param n\n * @returns {string}\n */\nfunction getNCharacters(str, start, n) {\n    return str.substring(start, start + n);\n}\n","'use strict';\n\nmodule.exports = {\n    evaluatePath,\n    setPath\n};\n\nfunction evaluatePath(document, keyPath) {\n    if (!document) {\n        return null;\n    }\n\n    let {indexOfDot, currentKey, remainingKeyPath} = computeStateInformation(keyPath);\n\n    // If there is a '.' in the keyPath and keyPath doesn't appear in the document, recur on the subdocument\n    if (indexOfDot >= 0 && !document[keyPath]) {\n        // If there's an array at the currentKey in the document, then iterate over those items evaluating the remaining path\n        if (Array.isArray(document[currentKey])) {\n            return document[currentKey].map((doc) => evaluatePath(doc, remainingKeyPath));\n        }\n        // Otherwise, we can just recur\n        return evaluatePath(document[currentKey], remainingKeyPath);\n    } else if (Array.isArray(document)) {\n        // If this \"document\" is actually an array, then iterate over those items evaluating the path\n        return document.map((doc) => evaluatePath(doc, keyPath));\n    }\n\n    // Otherwise, we can just return value directly\n    return document[keyPath];\n}\n\nfunction setPath(document, keyPath, value) {\n    if (!document) {\n        throw new Error('No document was provided.');\n    }\n\n    let {indexOfDot, currentKey, remainingKeyPath} = computeStateInformation(keyPath);\n\n    // If there is a '.' in the keyPath, recur on the subdoc and ...\n    if (indexOfDot >= 0) {\n        if (!document[currentKey] && Array.isArray(document)) {\n            // If this is an array and there are multiple levels of keys to iterate over, recur.\n            return document.forEach((doc) => setPath(doc, keyPath, value));\n        } else if (!document[currentKey]) {\n            // If the currentKey doesn't exist yet, populate it\n            document[currentKey] = {};\n        }\n        setPath(document[currentKey], remainingKeyPath, value);\n    } else if (Array.isArray(document)) {\n        // If this \"document\" is actually an array, then we can loop over each of the values and set the path\n        return document.forEach((doc) => setPath(doc, remainingKeyPath, value));\n    } else {\n        // Otherwise, we can set the path directly\n        document[keyPath] = value;\n    }\n\n    return document;\n}\n\n/**\n * Helper function that returns some information necessary to evaluate or set a path\n *   based on the provided keyPath value\n * @param keyPath\n * @returns {{indexOfDot: Number, currentKey: String, remainingKeyPath: String}}\n */\nfunction computeStateInformation(keyPath) {\n    let indexOfDot = keyPath.indexOf('.');\n\n    return {\n        indexOfDot,\n        currentKey: keyPath.slice(0, indexOfDot >= 0 ? indexOfDot : undefined),\n        remainingKeyPath: keyPath.slice(indexOfDot + 1)\n    };\n}\n","'use strict';\n\nlet constants = require('./constants.json'),\n    utils = require('./utils'),\n    _ = require('underscore'),\n    path = require('doc-path'),\n    deeks = require('deeks');\n\nconst Json2Csv = function(options) {\n    const wrapDelimiterCheckRegex = new RegExp(options.delimiter.wrap, 'g'),\n        crlfSearchRegex = /\\r?\\n|\\r/,\n        deeksOptions = {\n            expandArrayObjects: options.expandArrayObjects,\n            ignoreEmptyArraysWhenExpanding: options.expandArrayObjects\n        };\n\n    /** HEADER FIELD FUNCTIONS **/\n\n    /**\n     * Returns the list of data field names of all documents in the provided list\n     * @param data {Array<Object>} Data to be converted\n     * @returns {Promise.<Array[String]>}\n     */\n    function getFieldNameList(data) {\n        // If keys weren't specified, then we'll use the list of keys generated by the deeks module\n        return Promise.resolve(deeks.deepKeysFromList(data, deeksOptions));\n    }\n\n    /**\n     * Processes the schemas by checking for schema differences, if so desired.\n     * If schema differences are not to be checked, then it resolves the unique\n     * list of field names.\n     * @param documentSchemas\n     * @returns {Promise.<Array[String]>}\n     */\n    function processSchemas(documentSchemas) {\n        // If the user wants to check for the same schema (regardless of schema ordering)\n        if (options.checkSchemaDifferences) {\n            return checkSchemaDifferences(documentSchemas);\n        } else {\n            // Otherwise, we do not care if the schemas are different, so we should get the unique list of keys\n            let uniqueFieldNames = _.uniq(_.flatten(documentSchemas));\n            return Promise.resolve(uniqueFieldNames);\n        }\n    }\n\n    /**\n     * This function performs the schema difference check, if the user specifies that it should be checked.\n     * If there are no field names, then there are no differences.\n     * Otherwise, we get the first schema and the remaining list of schemas\n     * @param documentSchemas\n     * @returns {*}\n     */\n    function checkSchemaDifferences(documentSchemas) {\n        // have multiple documents - ensure only one schema (regardless of field ordering)\n        let firstDocSchema = documentSchemas[0],\n            restOfDocumentSchemas = documentSchemas.slice(1),\n            schemaDifferences = computeNumberOfSchemaDifferences(firstDocSchema, restOfDocumentSchemas);\n\n        // If there are schema inconsistencies, throw a schema not the same error\n        if (schemaDifferences) {\n            return Promise.reject(new Error(constants.errors.json2csv.notSameSchema));\n        }\n\n        return Promise.resolve(firstDocSchema);\n    }\n\n    /**\n     * Computes the number of schema differences\n     * @param firstDocSchema\n     * @param restOfDocumentSchemas\n     * @returns {*}\n     */\n    function computeNumberOfSchemaDifferences(firstDocSchema, restOfDocumentSchemas) {\n        return restOfDocumentSchemas.reduce((schemaDifferences, documentSchema) => {\n            // If there is a difference between the schemas, increment the counter of schema inconsistencies\n            let numberOfDifferences = utils.computeSchemaDifferences(firstDocSchema, documentSchema).length;\n            return numberOfDifferences > 0\n                ? schemaDifferences + 1\n                : schemaDifferences;\n        }, 0);\n    }\n\n    /**\n     * If so specified, this sorts the header field names alphabetically\n     * @param fieldNames {Array<String>}\n     * @returns {Array<String>} sorted field names, or unsorted if sorting not specified\n     */\n    function sortHeaderFields(fieldNames) {\n        if (options.sortHeader) {\n            return fieldNames.sort();\n        }\n        return fieldNames;\n    }\n\n    /**\n     * Trims the header fields, if the user desires them to be trimmed.\n     * @param params\n     * @returns {*}\n     */\n    function trimHeaderFields(params) {\n        if (options.trimHeaderFields) {\n            params.headerFields = params.headerFields.map((field) => field.split('.')\n                .map((component) => component.trim())\n                .join('.')\n            );\n        }\n        return params;\n    }\n\n    /**\n     * Wrap the headings, if desired by the user.\n     * @param params\n     * @returns {*}\n     */\n    function wrapHeaderFields(params) {\n        // only perform this if we are actually prepending the header\n        if (options.prependHeader) {\n            params.headerFields = params.headerFields.map(function(headingKey) {\n                return wrapFieldValueIfNecessary(headingKey);\n            });\n        }\n        return params;\n    }\n\n    /**\n     * Generates the CSV header string by joining the headerFields by the field delimiter\n     * @param params\n     * @returns {*}\n     */\n    function generateCsvHeader(params) {\n        params.header = params.headerFields.join(options.delimiter.field);\n        return params;\n    }\n\n    /**\n     * Retrieve the headings for all documents and return it.\n     * This checks that all documents have the same schema.\n     * @param data\n     * @returns {Promise}\n     */\n    function retrieveHeaderFields(data) {\n        if (options.keys) {\n            return Promise.resolve(options.keys)\n                .then(sortHeaderFields);\n        }\n\n        return getFieldNameList(data)\n            .then(processSchemas)\n            .then(sortHeaderFields);\n    }\n\n    /** RECORD FIELD FUNCTIONS **/\n\n    /**\n     * Main function which handles the processing of a record, or document to be converted to CSV format\n     * This function specifies and performs the necessary operations in the necessary order\n     * in order to obtain the data and convert it to CSV form while maintaining RFC 4180 compliance.\n     * * Order of operations:\n     * - Get fields from provided key list (as array of actual values)\n     * - Convert the values to csv/string representation [possible option here for custom converters?]\n     * - Trim fields\n     * - Determine if they need to be wrapped (& wrap if necessary)\n     * - Combine values for each line (by joining by field delimiter)\n     * @param params\n     * @returns {*}\n     */\n    function processRecords(params) {\n        params.records = params.records.map((record) => {\n            // Retrieve data for each of the headerFields from this record\n            let recordFieldData = retrieveRecordFieldData(record, params.headerFields),\n\n                // Process the data in this record and return the\n                processedRecordData = recordFieldData.map((fieldValue) => {\n                    fieldValue = trimRecordFieldValue(fieldValue);\n                    fieldValue = recordFieldValueToString(fieldValue);\n                    fieldValue = wrapFieldValueIfNecessary(fieldValue);\n\n                    return fieldValue;\n                });\n\n            // Join the record data by the field delimiter\n            return generateCsvRowFromRecord(processedRecordData);\n        }).join(options.delimiter.eol);\n\n        return params;\n    }\n\n    /**\n     * Helper function intended to process *just* array values when the expandArrayObjects setting is set to true\n     * @param recordFieldValue\n     * @returns {*} processed array value\n     */\n    function processRecordFieldDataForExpandedArrayObject(recordFieldValue) {\n        let filteredRecordFieldValue = utils.removeEmptyFields(recordFieldValue);\n\n        // If we have an array and it's either empty of full of empty values, then use an empty value representation\n        if (!recordFieldValue.length || !filteredRecordFieldValue.length) {\n            return options.emptyFieldValue || '';\n        } else if (filteredRecordFieldValue.length === 1) {\n            // Otherwise, we have an array of actual values...\n            // Since we are expanding array objects, we will want to key in on values of objects.\n            return filteredRecordFieldValue[0]; // Extract the single value in the array\n        }\n\n        return recordFieldValue;\n    }\n\n    /**\n     * Gets all field values from a particular record for the given list of fields\n     * @param record\n     * @param fields\n     * @returns {Array}\n     */\n    function retrieveRecordFieldData(record, fields) {\n        let recordValues = [];\n\n        fields.forEach((field) => {\n            let recordFieldValue = path.evaluatePath(record, field);\n\n            if (!_.isUndefined(options.emptyFieldValue) && utils.isEmptyField(recordFieldValue)) {\n                recordFieldValue = options.emptyFieldValue;\n            } else if (options.expandArrayObjects && Array.isArray(recordFieldValue)) {\n                recordFieldValue = processRecordFieldDataForExpandedArrayObject(recordFieldValue);\n            }\n\n            recordValues.push(recordFieldValue);\n        });\n\n        return recordValues;\n    }\n\n    /**\n     * Converts a record field value to its string representation\n     * @param fieldValue\n     * @returns {*}\n     */\n    function recordFieldValueToString(fieldValue) {\n        if (_.isArray(fieldValue) || _.isObject(fieldValue) && !_.isDate(fieldValue)) {\n            return JSON.stringify(fieldValue);\n        } else if (_.isUndefined(fieldValue)) {\n            return 'undefined';\n        } else if (_.isNull(fieldValue)) {\n            return 'null';\n        } else {\n            return fieldValue.toString();\n        }\n    }\n\n    /**\n     * Trims the record field value, if specified by the user's provided options\n     * @param fieldValue\n     * @returns {*}\n     */\n    function trimRecordFieldValue(fieldValue) {\n        if (options.trimFieldValues) {\n            if (_.isArray(fieldValue)) {\n                return fieldValue.map(trimRecordFieldValue);\n            } else if (_.isString(fieldValue)) {\n                return fieldValue.trim();\n            }\n            return fieldValue;\n        }\n        return fieldValue;\n    }\n\n    /**\n     * Escapes quotation marks in the field value, if necessary, and appropriately\n     * wraps the record field value if it contains a comma (field delimiter),\n     * quotation mark (wrap delimiter), or a line break (CRLF)\n     * @param fieldValue\n     * @returns {*}\n     */\n    function wrapFieldValueIfNecessary(fieldValue) {\n        const wrapDelimiter = options.delimiter.wrap;\n\n        // eg. includes quotation marks (default delimiter)\n        if (fieldValue.includes(options.delimiter.wrap)) {\n            // add an additional quotation mark before each quotation mark appearing in the field value\n            fieldValue = fieldValue.replace(wrapDelimiterCheckRegex, wrapDelimiter + wrapDelimiter);\n        }\n        // if the field contains a comma (field delimiter), quotation mark (wrap delimiter), line break, or CRLF\n        //   then enclose it in quotation marks (wrap delimiter)\n        if (fieldValue.includes(options.delimiter.field) ||\n            fieldValue.includes(options.delimiter.wrap) ||\n            fieldValue.match(crlfSearchRegex)) {\n            // wrap the field's value in a wrap delimiter (quotation marks by default)\n            fieldValue = wrapDelimiter + fieldValue + wrapDelimiter;\n        }\n\n        return fieldValue;\n    }\n\n    /**\n     * Generates the CSV record string by joining the field values together by the field delimiter\n     * @param recordFieldValues\n     */\n    function generateCsvRowFromRecord(recordFieldValues) {\n        return recordFieldValues.join(options.delimiter.field);\n    }\n\n    /** CSV COMPONENT COMBINER/FINAL PROCESSOR **/\n    /**\n     * Performs the final CSV construction by combining the fields in the appropriate\n     * order depending on the provided options values and sends the generated CSV\n     * back to the user\n     * @param params\n     */\n    function generateCsvFromComponents(params) {\n        let header = params.header,\n            records = params.records,\n\n            // If we are prepending the header, then add an EOL, otherwise just return the records\n            csv = (options.excelBOM ? constants.values.excelBOM : '') +\n                (options.prependHeader ? header + options.delimiter.eol : '') +\n                records;\n\n        return params.callback(null, csv);\n    }\n\n    /** MAIN CONVERTER FUNCTION **/\n\n    /**\n     * Internally exported json2csv function\n     * Takes data as either a document or array of documents and a callback that will be used to report the results\n     * @param data {Object|Array<Object>} documents to be converted to csv\n     * @param callback {Function} callback function\n     */\n    function convert(data, callback) {\n        // Single document, not an array\n        if (_.isObject(data) && !data.length) {\n            data = [data]; // Convert to an array of the given document\n        }\n\n        // Retrieve the heading and then generate the CSV with the keys that are identified\n        retrieveHeaderFields(data)\n            .then((headerFields) => ({\n                headerFields,\n                callback,\n                records: data\n            }))\n            .then(processRecords)\n            .then(wrapHeaderFields)\n            .then(trimHeaderFields)\n            .then(generateCsvHeader)\n            .then(generateCsvFromComponents)\n            .catch(callback);\n    }\n\n    return {\n        convert,\n        validationFn: _.isObject,\n        validationMessages: constants.errors.json2csv\n    };\n};\n\nmodule.exports = { Json2Csv };\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nconst _ = require('underscore');\n\nmodule.exports = {\n    deepKeys: deepKeys,\n    deepKeysFromList: deepKeysFromList\n};\n\n/**\n * Return the deep keys list for a single document\n * @param object\n * @param options\n * @returns {Array}\n */\nfunction deepKeys(object, options) {\n    options = mergeOptions(options);\n    if (_.isObject(object)) {\n        return generateDeepKeysList('', object, options);\n    }\n    return [];\n}\n\n/**\n * Return the deep keys list for all documents in the provided list\n * @param list\n * @param options\n * @returns Array[Array[String]]\n */\nfunction deepKeysFromList(list, options) {\n    options = mergeOptions(options);\n    return list.map((document) => { // for each document\n        if (_.isObject(document)) {\n            // if the data at the key is a document, then we retrieve the subHeading starting with an empty string heading and the doc\n            return deepKeys(document, options);\n        }\n        return [];\n    });\n}\n\nfunction generateDeepKeysList(heading, data, options) {\n    let keys = Object.keys(data).map((currentKey) => {\n        // If the given heading is empty, then we set the heading to be the subKey, otherwise set it as a nested heading w/ a dot\n        let keyName = buildKeyName(heading, currentKey);\n\n        // If we have another nested document, recur on the sub-document to retrieve the full key name\n        if (isDocumentToRecurOn(data[currentKey])) {\n            return generateDeepKeysList(keyName, data[currentKey], options);\n        } else if (options.expandArrayObjects && isArrayToRecurOn(data[currentKey])) {\n            // If we have a nested array that we need to recur on\n            return processArrayKeys(data[currentKey], currentKey, options);\n        }\n        // Otherwise return this key name since we don't have a sub document\n        return keyName;\n    });\n\n    return _.flatten(keys);\n}\n\n/**\n * Helper function to handle the processing of arrays when the expandArrayObjects\n * option is specified.\n * @param subArray\n * @param currentKeyPath\n * @param options\n * @returns {*}\n */\nfunction processArrayKeys(subArray, currentKeyPath, options) {\n    let subArrayKeys = deepKeysFromList(subArray);\n\n    if (!subArray.length) {\n        return options.ignoreEmptyArraysWhenExpanding ? [] : [currentKeyPath];\n    } else if (subArray.length && _.flatten(subArrayKeys).length === 0) {\n        // Has items in the array, but no objects\n        return [currentKeyPath];\n    } else {\n        subArrayKeys = subArrayKeys.map((schemaKeys) => {\n            if (isEmptyArray(schemaKeys)) {\n                return [currentKeyPath];\n            }\n            return schemaKeys.map((subKey) => buildKeyName(currentKeyPath, subKey));\n        });\n\n        return _.uniq(_.flatten(subArrayKeys));\n    }\n}\n\n/**\n * Function used to generate the key path\n * @param upperKeyName String accumulated key path\n * @param currentKeyName String current key name\n * @returns String\n */\nfunction buildKeyName(upperKeyName, currentKeyName) {\n    if (upperKeyName) {\n        return upperKeyName + '.' + currentKeyName;\n    }\n    return currentKeyName;\n}\n\n/**\n * Returns whether this value is a document to recur on or not\n * @param val Any item whose type will be evaluated\n * @returns {boolean}\n */\nfunction isDocumentToRecurOn(val) {\n    return _.isObject(val) && !_.isNull(val) && !Array.isArray(val) && Object.keys(val).length;\n}\n\n/**\n * Returns whether this value is an array to recur on or not\n * @param val Any item whose type will be evaluated\n * @returns {boolean}\n */\nfunction isArrayToRecurOn(val) {\n    return Array.isArray(val);\n}\n\n/**\n * Helper function that determines whether or not a value is an empty array\n * @param val\n * @returns {boolean}\n */\nfunction isEmptyArray(val) {\n    return Array.isArray(val) && !val.length;\n}\n\nfunction mergeOptions(options) {\n    return _.defaults(options || {}, {\n        expandArrayObjects: false,\n        ignoreEmptyArraysWhenExpanding: false\n    });\n}\n","'use strict';\n\nlet constants = require('./constants.json'),\n    utils = require('./utils'),\n    _ = require('underscore'),\n    path = require('doc-path');\n\nconst Csv2Json = function(options) {\n    const escapedWrapDelimiterRegex = new RegExp(options.delimiter.wrap + options.delimiter.wrap, 'g'),\n        excelBOMRegex = new RegExp('^' + constants.values.excelBOM);\n\n    /**\n     * Trims the header key, if specified by the user via the provided options\n     * @param headerKey\n     * @returns {*}\n     */\n    function processHeaderKey(headerKey) {\n        headerKey = removeWrapDelimitersFromValue(headerKey);\n        if (options.trimHeaderFields) {\n            return headerKey.split('.')\n                .map((component) => component.trim())\n                .join('.');\n        }\n        return headerKey;\n    }\n\n    /**\n     * Generate the JSON heading from the CSV\n     * @param lines {String[]} csv lines split by EOL delimiter\n     * @returns {*}\n     */\n    function retrieveHeading(lines) {\n        let params = {lines},\n            // Generate and return the heading keys\n            headerRow = params.lines[0];\n        params.headerFields = headerRow.map((headerKey, index) => ({\n            value: processHeaderKey(headerKey),\n            index: index\n        }));\n\n        // If the user provided keys, filter the generated keys to just the user provided keys so we also have the key index\n        if (options.keys) {\n            params.headerFields = params.headerFields.filter((headerKey) => options.keys.includes(headerKey.value));\n        }\n\n        return params;\n    }\n\n    /**\n     * Splits the lines of the CSV string by the EOL delimiter and resolves and array of strings (lines)\n     * @param csv\n     * @returns {Promise.<String[]>}\n     */\n    function splitCsvLines(csv) {\n        return Promise.resolve(splitLines(csv));\n    }\n\n    /**\n     * Removes the Excel BOM value, if specified by the options object\n     * @param csv\n     * @returns {Promise.<String>}\n     */\n    function stripExcelBOM(csv) {\n        if (options.excelBOM) {\n            return Promise.resolve(csv.replace(excelBOMRegex, ''));\n        }\n        return Promise.resolve(csv);\n    }\n\n    /**\n     * Helper function that splits a line so that we can handle wrapped fields\n     * @param csv\n     */\n    function splitLines(csv) {\n        // Parse out the line...\n        let lines = [],\n            splitLine = [],\n            character,\n            charBefore,\n            charAfter,\n            nextNChar,\n            lastCharacterIndex = csv.length - 1,\n            eolDelimiterLength = options.delimiter.eol.length,\n            stateVariables = {\n                insideWrapDelimiter: false,\n                parsingValue: true,\n                justParsedDoubleQuote: false,\n                startIndex: 0\n            },\n            index = 0;\n\n        // Loop through each character in the line to identify where to split the values\n        while (index < csv.length) {\n            // Current character\n            character = csv[index];\n            // Previous character\n            charBefore = index ? csv[index - 1] : '';\n            // Next character\n            charAfter = index < lastCharacterIndex ? csv[index + 1] : '';\n            // Next n characters, including the current character, where n = length(EOL delimiter)\n            // This allows for the checking of an EOL delimiter when if it is more than a single character (eg. '\\r\\n')\n            nextNChar = utils.getNCharacters(csv, index, eolDelimiterLength);\n\n            if ((nextNChar === options.delimiter.eol && !stateVariables.insideWrapDelimiter ||\n                index === lastCharacterIndex) && charBefore === options.delimiter.field) {\n                // If we reached an EOL delimiter or the end of the csv and the previous character is a field delimiter...\n\n                // If the start index is the current index (and since the previous character is a comma),\n                //   then the value being parsed is an empty value accordingly, add an empty string\n                let parsedValue = nextNChar === options.delimiter.eol && stateVariables.startIndex === index\n                    ? ''\n                    // Otherwise, there's a valid value, and the start index isn't the current index, grab the whole value\n                    : csv.substr(stateVariables.startIndex);\n\n                // Push the value for the field that we were parsing\n                splitLine.push(parsedValue);\n\n                // Since the last character is a comma, there's still an additional implied field value trailing the comma.\n                //   Since this value is empty, we push an extra empty value\n                splitLine.push('');\n\n                // Finally, push the split line values into the lines array and clear the split line\n                lines.push(splitLine);\n                splitLine = [];\n                stateVariables.startIndex = index + eolDelimiterLength;\n                stateVariables.parsingValue = true;\n                stateVariables.insideWrapDelimiter = charAfter === options.delimiter.wrap;\n            } else if (index === lastCharacterIndex || nextNChar === options.delimiter.eol &&\n                // if we aren't inside wrap delimiters or if we are but the character before was a wrap delimiter and we didn't just see two\n                (!stateVariables.insideWrapDelimiter ||\n                    stateVariables.insideWrapDelimiter && charBefore === options.delimiter.wrap && !stateVariables.justParsedDoubleQuote)) {\n                // Otherwise if we reached the end of the line or csv (and current character is not a field delimiter)\n\n                let toIndex = index !== lastCharacterIndex || charBefore === options.delimiter.wrap ? index : undefined;\n\n                // Retrieve the remaining value and add it to the split line list of values\n                splitLine.push(csv.substring(stateVariables.startIndex, toIndex));\n\n                // Finally, push the split line values into the lines array and clear the split line\n                lines.push(splitLine);\n                splitLine = [];\n                stateVariables.startIndex = index + eolDelimiterLength;\n                stateVariables.parsingValue = true;\n                stateVariables.insideWrapDelimiter = charAfter === options.delimiter.wrap;\n            } else if ((charBefore !== options.delimiter.wrap || stateVariables.justParsedDoubleQuote && charBefore === options.delimiter.wrap) &&\n                character === options.delimiter.wrap && utils.getNCharacters(csv, index + 1, eolDelimiterLength) === options.delimiter.eol) {\n                // If we reach a wrap which is not preceded by a wrap delim and the next character is an EOL delim (ie. *\"\\n)\n\n                stateVariables.insideWrapDelimiter = false;\n                stateVariables.parsingValue = false;\n                // Next iteration will substring, add the value to the line, and push the line onto the array of lines\n            } else if (character === options.delimiter.wrap && (index === 0 || utils.getNCharacters(csv, index - 1, eolDelimiterLength) === options.delimiter.eol)) {\n                // If the line starts with a wrap delimiter (ie. \"*)\n\n                stateVariables.insideWrapDelimiter = true;\n                stateVariables.parsingValue = true;\n                stateVariables.startIndex = index;\n            } else if (character === options.delimiter.wrap && charAfter === options.delimiter.field) {\n                // If we reached a wrap delimiter with a field delimiter after it (ie. *\",)\n\n                splitLine.push(csv.substring(stateVariables.startIndex, index + 1));\n                stateVariables.startIndex = index + 2; // next value starts after the field delimiter\n                stateVariables.insideWrapDelimiter = false;\n                stateVariables.parsingValue = false;\n            } else if (character === options.delimiter.wrap && charBefore === options.delimiter.field &&\n                !stateVariables.insideWrapDelimiter && !stateVariables.parsingValue) {\n                // If we reached a wrap delimiter after a comma and we aren't inside a wrap delimiter\n\n                stateVariables.startIndex = index;\n                stateVariables.insideWrapDelimiter = true;\n                stateVariables.parsingValue = true;\n            } else if (character === options.delimiter.wrap && charBefore === options.delimiter.field &&\n                !stateVariables.insideWrapDelimiter && stateVariables.parsingValue) {\n                // If we reached a wrap delimiter with a field delimiter after it (ie. ,\"*)\n\n                splitLine.push(csv.substring(stateVariables.startIndex, index - 1));\n                stateVariables.insideWrapDelimiter = true;\n                stateVariables.parsingValue = true;\n                stateVariables.startIndex = index;\n            } else if (character === options.delimiter.wrap && charAfter === options.delimiter.wrap) {\n                // If we run into an escaped quote (ie. \"\") skip past the second quote\n\n                index += 2;\n                stateVariables.justParsedDoubleQuote = true;\n                continue;\n            } else if (character === options.delimiter.field && charBefore !== options.delimiter.wrap &&\n                charAfter !== options.delimiter.wrap && !stateVariables.insideWrapDelimiter &&\n                stateVariables.parsingValue) {\n                // If we reached a field delimiter and are not inside the wrap delimiters (ie. *,*)\n\n                splitLine.push(csv.substring(stateVariables.startIndex, index));\n                stateVariables.startIndex = index + 1;\n            } else if (character === options.delimiter.field && charBefore === options.delimiter.wrap &&\n                charAfter !== options.delimiter.wrap && !stateVariables.parsingValue) {\n                // If we reached a field delimiter, the previous character was a wrap delimiter, and the\n                //   next character is not a wrap delimiter (ie. \",*)\n\n                stateVariables.insideWrapDelimiter = false;\n                stateVariables.parsingValue = true;\n                stateVariables.startIndex = index + 1;\n            }\n            // Otherwise increment to the next character\n            index++;\n            // Reset the double quote state variable\n            stateVariables.justParsedDoubleQuote = false;\n        }\n\n        return lines;\n    }\n\n    /**\n     * Retrieves the record lines from the split CSV lines and sets it on the params object\n     * @param params\n     * @returns {*}\n     */\n    function retrieveRecordLines(params) {\n        params.recordLines = params.lines.splice(1); // All lines except for the header line\n\n        return params;\n    }\n\n    /**\n     * Retrieves the value for the record from the line at the provided key.\n     * @param line {String[]} split line values for the record\n     * @param key {Object} {index: Number, value: String}\n     */\n    function retrieveRecordValueFromLine(line, key) {\n        // If there is a value at the key's index, use it; otherwise, null\n        let value = line[key.index];\n\n        // Perform any necessary value conversions on the record value\n        return processRecordValue(value);\n    }\n\n    /**\n     * Processes the record's value by parsing the data to ensure the CSV is\n     * converted to the JSON that created it.\n     * @param fieldValue {String}\n     * @returns {*}\n     */\n    function processRecordValue(fieldValue) {\n        // If the value is an array representation, convert it\n        let parsedJson = parseValue(fieldValue);\n        // If parsedJson is anything aside from an error, then we want to use the parsed value\n        // This allows us to interpret values like 'null' --> null, 'false' --> false\n        if (!_.isError(parsedJson)) {\n            fieldValue = parsedJson;\n        } else if (fieldValue === 'undefined') {\n            fieldValue = undefined;\n        }\n\n        return fieldValue;\n    }\n\n    /**\n     * Trims the record value, if specified by the user via the options object\n     * @param fieldValue\n     * @returns {String|null}\n     */\n    function trimRecordValue(fieldValue) {\n        if (options.trimFieldValues && !_.isNull(fieldValue)) {\n            return fieldValue.trim();\n        }\n        return fieldValue;\n    }\n\n    /**\n     * Create a JSON document with the given keys (designated by the CSV header)\n     *   and the values (from the given line)\n     * @param keys String[]\n     * @param line String\n     * @returns {Object} created json document\n     */\n    function createDocument(keys, line) {\n        // Reduce the keys into a JSON document representing the given line\n        return keys.reduce((document, key) => {\n            // If there is a value at the key's index in the line, set the value; otherwise null\n            let value = retrieveRecordValueFromLine(line, key);\n\n            // Otherwise add the key and value to the document\n            return path.setPath(document, key.value, value);\n        }, {});\n    }\n\n    /**\n     * Removes the outermost wrap delimiters from a value, if they are present\n     * Otherwise, the non-wrapped value is returned as is\n     * @param fieldValue\n     * @returns {String}\n     */\n    function removeWrapDelimitersFromValue(fieldValue) {\n        let firstChar = fieldValue[0],\n            lastIndex = fieldValue.length - 1,\n            lastChar = fieldValue[lastIndex];\n        // If the field starts and ends with a wrap delimiter\n        if (firstChar === options.delimiter.wrap && lastChar === options.delimiter.wrap) {\n            return fieldValue.substr(1, lastIndex - 1);\n        }\n        return fieldValue;\n    }\n\n    /**\n     * Unescapes wrap delimiters by replacing duplicates with a single (eg. \"\" -> \")\n     * This is done in order to parse RFC 4180 compliant CSV back to JSON\n     * @param fieldValue\n     * @returns {String}\n     */\n    function unescapeWrapDelimiterInField(fieldValue) {\n        return fieldValue.replace(escapedWrapDelimiterRegex, options.delimiter.wrap);\n    }\n\n    /**\n     * Main helper function to convert the CSV to the JSON document array\n     * @param params {Object} {lines: [String], callback: Function}\n     * @returns {Array}\n     */\n    function transformRecordLines(params) {\n        params.json = params.recordLines.reduce((generatedJsonObjects, line) => { // For each line, create the document and add it to the array of documents\n            line = line.map((fieldValue) => {\n                // Perform the necessary operations on each line\n                fieldValue = removeWrapDelimitersFromValue(fieldValue);\n                fieldValue = unescapeWrapDelimiterInField(fieldValue);\n                fieldValue = trimRecordValue(fieldValue);\n\n                return fieldValue;\n            });\n\n            let generatedDocument = createDocument(params.headerFields, line);\n            return generatedJsonObjects.concat(generatedDocument);\n        }, []);\n\n        return params;\n    }\n\n    /**\n     * Attempts to parse the provided value. If it is not parsable, then an error is returned\n     * @param value\n     * @returns {*}\n     */\n    function parseValue(value) {\n        try {\n            if (utils.isStringRepresentation(value, options) && !utils.isDateRepresentation(value)) {\n                return value;\n            }\n\n            let parsedJson = JSON.parse(value);\n\n            // If the parsed value is an array, then we also need to trim record values, if specified\n            if (_.isArray(parsedJson)) {\n                return parsedJson.map(trimRecordValue);\n            }\n\n            return parsedJson;\n        } catch (err) {\n            return err;\n        }\n    }\n\n    /**\n     * Internally exported csv2json function\n     * Takes options as a document, data as a CSV string, and a callback that will be used to report the results\n     * @param data String csv string\n     * @param callback Function callback function\n     */\n    function convert(data, callback) {\n        // Split the CSV into lines using the specified EOL option\n        // validateCsv(data, callback)\n        //     .then(stripExcelBOM)\n        stripExcelBOM(data)\n            .then(splitCsvLines)\n            .then(retrieveHeading) // Retrieve the headings from the CSV, unless the user specified the keys\n            .then(retrieveRecordLines) // Retrieve the record lines from the CSV\n            .then(transformRecordLines) // Retrieve the JSON document array\n            .then((params) => callback(null, params.json)) // Send the data back to the caller\n            .catch(callback);\n    }\n\n    return {\n        convert,\n        validationFn: _.isString,\n        validationMessages: constants.errors.csv2json\n    };\n};\n\nmodule.exports = { Csv2Json };\n","// @todo import zepto?\nimport BlackBoxPlusInfo from \"./BlackBoxPlusInfo\";\n\nexport default class BlackBoxPlusExport extends BlackBoxPlusInfo {\n\n    // https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/contribute/footage?index=11&limit=10\n    countInTabs;\n    urlBaseCache;\n\n    /**\n     * getCountInTabs()\n     *\n     * @returns {Promise<*>}\n     * Example this.countInTabs = {\"countContributeFootages\":115,\"countCurationFootages\":0,\"countContentFootages\":658}\n     */\n    async getCountInTabs(force = false) {\n        if (!this.countInTabs || true === force) {\n            this.setStatusLoading(`the count of items`);\n            this.countInTabs = await this.callAPI(`/footage/count_in_tabs`);\n            // console.debug(\"The countInTabs is: \", this.countInTabs);\n        }\n        return this.countInTabs;\n    }\n\n    /**\n     * Gather Footage Info\n     * @param type Type can be one of: contribute, curation, content\n     * @returns {Promise<[]>}\n     */\n    async gatherFootageData(type = 'contribute') {\n        let memberId = this.getMemberId();\n        let limit = 200; // How many results at a time\n        let headers = this.getAPICallHeaders('GET');\n        let footage = [];\n        this.setStatusLoading(`the ${type} results`);\n\n        await this.getCountInTabs(); // Ensure the count is set\n        // Example count_in_tabs response = {\"countContributeFootages\":115,\"countCurationFootages\":0,\"countContentFootages\":658}\n        let typeMapping = {\n            contribute: {\n                totalRecords: this.countInTabs.countContributeFootages,\n                apiType: 'contribute/footage',\n                apiPost: '',\n            },\n            curation: {\n                totalRecords: this.countInTabs.countCurationFootages,\n                apiType: 'curationFootage',\n                apiPost: '',\n            },\n            content: {\n                totalRecords: this.countInTabs.countContentFootages,\n                apiType: 'content/footage',\n                apiPost: '&contentFilter=A', // Get ALL the footage\n            }\n        };\n\n        let totalRecords = typeMapping[type].totalRecords;\n        let apiType = typeMapping[type].apiType;\n        // let apiPost = typeMapping[type].apiPost;\n        let pagesNeeded = Math.ceil(totalRecords / limit);\n        // console.debug({type, totalRecords, apiType, pagesNeeded});\n        for (let page = 1; page <= pagesNeeded; page++) {\n\n            let index = (page - 1) * limit + 1;\n            this.setStatusLoading(`the ${type} items. Page ${page} of ${pagesNeeded}`);\n            let url = `https://portal.blackbox.global/api/member/${memberId}/${apiType}?index=${index}&limit=${limit}${typeMapping[type].apiPost}`;\n            let request = await fetch(url, headers);\n            if (request.ok) {\n                let requestContent = await request.json();\n                // NB: The Workspace response includes success: true and the rest inside a data object. But the content results don't do this\n                // if (requestContent.success !== true) {\n                //     this.setStatusError(`API said it was not successful when trying to get your ${type} footage information. Page ${page} of ${pagesNeeded}`);\n                //     console.error({error: 'Success is not true in the API response', url, requestContent});\n                //     return footage;\n                // }\n                if (requestContent && requestContent.data && requestContent.data.list && requestContent.data.list.length) {\n                    // console.debug(`Adding the ${requestContent.data.list.length} ${type} footage entries to the list. Page ${page} of ${pagesNeeded}`, requestContent);\n                    footage = [].concat(footage, requestContent.data.list);\n\n                } else if (requestContent && requestContent.list && requestContent.list.length) {\n                    // console.debug(`Adding the ${requestContent.list.length} ${type} footage entries to the list. Page ${page} of ${pagesNeeded}`, requestContent);\n                    footage = [].concat(footage, requestContent.list);\n                }\n            } else {\n                this.setStatusError(`Unable to access a copy of your ${type} footage information`);\n                console.error(`Unable to access a copy of your ${type} footage information. Page ${page} of ${pagesNeeded}. URL: ${url}`, request);\n                return footage;\n            }\n        }\n        this.setStatusProcessing(`the ${footage.length} ${type} entries`);\n\n        return footage;\n\n        // Contribute\n        // https://portal.blackbox.global/api/member/${memberId}/project/${element.projectId}/`, headers);\n        // https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/contribute/footage?index=11&limit=10\n\n        // Example Response: {\"success\":true,\"data\":{\"list\":[{\"footageId\":\"62754493-ccc1-4672-bcf7-afdd1481ee09\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0025.mp4\",\"createdAt\":\"2020-01-02T05:49:36.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"9c0c0baa-c715-4e2e-90b2-e92b30581b8c\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0050.mp4\",\"createdAt\":\"2020-01-02T05:39:24.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"ac7a8997-7977-4861-8cdd-553b5d7fc35b\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0049.mp4\",\"createdAt\":\"2020-01-02T05:37:20.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"98614246-2c40-4b9f-855b-a5a220f66a18\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0027.mp4\",\"createdAt\":\"2020-01-02T05:31:00.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"72a038ab-c6d1-441a-9a43-8f29a994eb26\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0048.mp4\",\"createdAt\":\"2020-01-02T05:27:22.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"20d41152-fc72-4826-9999-cd68e2646927\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0046.mp4\",\"createdAt\":\"2020-01-02T05:25:09.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"3578ecb0-ca2e-4460-93df-d7fe8abac275\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0047.mp4\",\"createdAt\":\"2020-01-02T05:21:57.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"2f3b4369-6ba0-478a-8b9b-1147d555c8cf\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0042.mp4\",\"createdAt\":\"2020-01-02T05:16:03.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"0e5f70d7-a378-492c-8b1f-9b80fd152d34\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0045.mp4\",\"createdAt\":\"2020-01-02T05:13:43.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null},{\"footageId\":\"c7b1de39-a64e-4c41-91cf-f6a2d96d1301\",\"memberId\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"uploadedBy\":\"5afd6163-a82a-4079-8e3b-592c349ae72d\",\"projectId\":null,\"originalFileName\":\"2019-03-15th Cebu Trip Day 1 - Island, Sardines, Turtle, Kawasan falls canyoneering (4K 50fps GoPro) - _V1-0044.mp4\",\"createdAt\":\"2020-01-02T05:07:27.000Z\",\"ownership\":60,\"isOwner\":true,\"approvalStatus\":\"approved\",\"batchName\":\"\",\"canSubmit\":false,\"description\":null,\"keywords\":\"\",\"submissionDate\":null,\"ownerFullName\":\"Michael Kubler\",\"transitionStatus\":\"Uploaded\",\"reviewStatus\":null,\"canDelete\":true,\"sharers\":[],\"editorial\":false,\"editorialCity\":null,\"editorialState\":null,\"editorialCountry\":null,\"editorialText\":null,\"category\":null,\"batchId\":null,\"canPreview\":true,\"canAssignCurator\":false,\"curators\":[{\"id\":\"1ad6e882-4146-4af5-8d33-4586c6deb60b\",\"fullName\":\"Jovelyn Cabahug Domingo\",\"collabShare\":40,\"collabType\":\"curator\",\"locked\":false}],\"documents\":{\"modelDocuments\":[],\"propertyDocuments\":[]},\"isAttachedRelease\":false,\"reviewRequired\":false,\"curationStatus\":\"incomplete\",\"rejectedReason\":[],\"noteToOwner\":null}],\"pageInfo\":{\"totalRecords\":115,\"totalDisplayRecords\":10}}}\n    }\n\n    async getAllFootage() {\n\n        let blackBoxPlusFootage = {};\n        return new Promise((resolve, reject) => {\n\n            this.getCountInTabs().then(() => {\n\n                let contributePromise = this.gatherFootageData('contribute').then(function (data) {\n                    blackBoxPlusFootage.contribute = data;\n                    // console.debug(`The contribue footage contains ${data.length} entries`);\n                });\n                let curationPromise = this.gatherFootageData('curation').then(function (data) {\n                    blackBoxPlusFootage.curation = data\n                });\n                let contentPromise = this.gatherFootageData('content').then(function (data) {\n                    blackBoxPlusFootage.content = data\n                });\n\n                // When all completed\n                Promise.all([contributePromise, curationPromise, contentPromise]).then((data) => {\n\n                    // console.debug('The footages data is: ', blackBoxPlusFootage);\n                    this.addMessage(`<p>All Footage data loaded</p>`);\n                    resolve(blackBoxPlusFootage);\n\n                });\n            });\n\n        });\n    }\n\n\n    async getAllFinancials() {\n\n        let blackBoxPlusFinancials = {};\n        this.setStatusLoading(`financial data`);\n        return new Promise((resolve, reject) => {\n\n            let financialSummaryInfoPromise = this.getFinancialSummaryInfo().then(function (data) {\n                blackBoxPlusFinancials.financialSummaryInfo = data;\n                // console.debug(`The financialSummaryInfo contains ${data.length} entries`);\n            });\n\n            let financialEarningsSummaryPromise = this.getFinancialEarningsSummary().then(function (data) {\n                blackBoxPlusFinancials.financialEarningsSummary = data;\n                // console.debug(`The getFinancialEarningsSummary contains ${data.length} entries`);\n            });\n            let getUnpaidEarningsPromise = this.getUnpaidEarnings().then(function (data) {\n                blackBoxPlusFinancials.unpaidEarnings = data;\n            });\n            let getFinancialPaymentHistoryPromise = this.getFinancialPaymentHistory().then(function (data) {\n                blackBoxPlusFinancials.financialPaymentHistory = data;\n            });\n            let getFinancialTotalEarningsReportPromise = this.getFinancialTotalEarningsReport().then(function (data) {\n                blackBoxPlusFinancials.financialTotalEarningsReport = data;\n            });\n\n            // When all completed\n            Promise.all([financialSummaryInfoPromise, financialEarningsSummaryPromise, getUnpaidEarningsPromise, getFinancialPaymentHistoryPromise, getFinancialTotalEarningsReportPromise]).then((data) => {\n\n                console.debug('The blackBoxPlusFinancials data char length is ', JSON.stringify(blackBoxPlusFinancials).length);\n                this.addMessage(`<p>All Financial data loaded</p>`);\n                resolve(blackBoxPlusFinancials);\n            });\n        });\n\n    }\n\n    /**\n     *\n     * @returns {Promise<*|undefined>}\n     */\n    async getFinancialSummaryInfo() {\n        // URL example https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/summaryInfo\n        // Example response = {\"RevenueToDate\":204.25,\"RevenueThisMonth\":0,\"ReferralToDate\":1.08,\"ReferralThisMonth\":0,\"MemberStatus\":\"Regular\",\"MembershipDue\":\"N/A\",\"OutstandingCollaborativeInvitations\":0,\"AvailableOpportunities\":1,\"ReferralMembers\":1}\n        return this.callAPI(`/summaryInfo`);\n    }\n\n    async getFinancialEarningsSummary(toDate = null, fromDate = '2017-01-01%2000:00:00') {\n        toDate = toDate || this.getFormattedDate(\"{Y}-{M}-{D}\") + '%2023:59:59'; // Until the end of today\n        // Example URL https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/earningSummary?fromDate=2019-11-12%2000:00:00&toDate=2020-02-10%2023:59:59\n        return this.callAPI(`/earningSummary?fromDate=${fromDate}&toDate=${toDate}`);\n    }\n\n\n    /**\n     * Unpaid Earnings Summary\n     *\n     * 'My Revenue' page\n     * Described as 'A list of footage have been sold recently but have not been paid'\n     *\n     * You shouldn't need to use the provided values but if you do it\n     * expects toDate and fromDate to be fully formed strings\n     * @param toDate\n     * @param fromDate\n     * @returns {Promise<*|undefined>}\n     */\n    async getUnpaidEarnings(toDate = null, fromDate = null) {\n        let dateMonthAgo = fromDate || new Date();\n        // Set it to one month ago\n        dateMonthAgo.setMonth(dateMonthAgo.getMonth() - 1); // This works for January as well and goes back to the previous year\n        dateMonthAgo.setDate(0); // This will actually from the last day of the month before, just to be sure\n\n        toDate = toDate || this.getFormattedDate(\"{Y}-{M}-{D}\") + '%2023:59:59'; // Until the end of today\n        fromDate = fromDate || this.getFormattedDate(\"{Y}-{M}-{D}\", dateMonthAgo) + '%2000:00:00'; // Until the end of today\n        // e.g https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/revenue?fromDate=2019-12-10%2000:00:00&toDate=2020-02-10%2023:59:59&index=1&limit=10\n        return this.callAPI(`/revenue?fromDate=${fromDate}&toDate=${toDate}&index=1&limit=500`);\n        // Example response\n    }\n\n\n    /**\n     * Payment History (months)\n     *\n     * Note that this deals with the pagination\n     * Also note that the \"totalEarning\" field is lost,\n     * but people using this as CSV can re-created that themselves very easily and\n     * it's on a per request basis so will be wrong if there's multiple API calls\n     *\n     * @returns {Promise<*|undefined>}\n     */\n    async getFinancialPaymentHistory() {\n        // https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/paymentHistory?index=1&limit=10\n        // Example api response: {\"list\":[{\"paymentDate\":\"2020-01-19T20:48:00.000Z\",\"grossRev\":65.13,\"netPayment\":64.14,\"paymentMethod\":\"PayPal\",\"transferFee\":1.31,\"commission\":0.33},{\"paymentDate\":\"2019-12-20T15:10:14.000Z\",\"grossRev\":93.52,\"netPayment\":92.12,\"paymentMethod\":\"PayPal\",\"transferFee\":1.88,\"commission\":0.48},{\"paymentDate\":\"2019-11-20T15:45:02.000Z\",\"grossRev\":17.14,\"netPayment\":16.91,\"paymentMethod\":\"PayPal\",\"transferFee\":0.34,\"commission\":0.11},{\"paymentDate\":\"2019-09-20T03:38:44.000Z\",\"grossRev\":8.92,\"netPayment\":8.81,\"paymentMethod\":\"PayPal\",\"transferFee\":0.18,\"commission\":0.07}],\"pageInfo\":{\"totalRecords\":4,\"totalDisplayRecords\":4}}\n        return this.callPaginatedAPI(`/paymentHistory?`);\n    }\n\n\n    /**\n     * Total Earnings Report (Individual sales)\n     *\n     * Note that this deals with the pagination and date ranges\n     *\n     * @returns {Promise<*|undefined>}\n     */\n    async getFinancialTotalEarningsReport(toDate = null, fromDate = '2017-01-01%2000:00:00') {\n        // Total Earnings Report (Individual sales)\n        // https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/earningsReport?fromDate=2019-12-10%2000:00:00&toDate=2020-02-10%2023:59:59&index=1&limit=10\n        // Example {\"items\":[{\"footageId\":\"54e4043f-39eb-4ced-a663-e10745ac2260\",\"footageName\":\"2019-05-16th Oasis One Flight #2 - 14 Sunset descending-.mp4\",\"earning\":18.55,\"totalDownloads\":1,\"dateSold\":\"2020-01-23T00:00:00.000Z\"},{\"footageId\":\"74eab76b-a4b5-4e69-a7e8-afe77b182b1e\",\"footageName\":\"2019-04-21st Manila Bay and StarCity Theme Park - _V1-0022.mp4\",\"earning\":65.46,\"totalDownloads\":1,\"dateSold\":\"2019-12-18T00:00:00.000Z\"}],\"totalEarning\":84.01,\"pageInfo\":{\"totalRecords\":2,\"totalDisplayRecords\":2}}\n\n        toDate = toDate || this.getFormattedDate(\"{Y}-{M}-{D}\") + '%2023:59:59'; // Until the end of today\n        return this.callPaginatedAPI(`/earningsReport?fromDate=${fromDate}&toDate=${toDate}&`);\n    }\n\n\n    /**\n     * Mainly for getting the email address of curation owners, their names are already output in the footage json\n     * @returns {Promise<*|undefined>}\n     *\n     * NB: This isn't used at the moment.\n     */\n    async getCurationOwners() {\n        // e.g https://portal.blackbox.global/api/member/5afd6163-a82a-4079-8e3b-592c349ae72d/curationFootage/getCurationOwners\n        // Example response: {\"success\":true,\"data\":[{\"name\":\"Michael Kubler\",\"value\":\"blackboxPlus+example@greyphoenix.biz\"}]}\n        return this.callAPI(`curationFootage/getCurationOwners`);\n    }\n\n\n    get urlBase() {\n        if (this.urlBaseCache) {\n            return this.urlBaseCache;\n        } else {\n\n            let memberId = this.getMemberId();\n            return this.urlBaseCache = `https://portal.blackbox.global/api/member/${memberId}`;\n        }\n    }\n\n    async callAPI(uri, method = 'GET') {\n\n        this.setStatusLoading(`Making a call to ${uri}`)\n        let headers = this.getAPICallHeaders(method);\n        let url = `${this.urlBase}${uri}`;\n        let response = await fetch(url, headers);\n        if (response.ok) {\n            return await response.json();\n        } else {\n            this.setStatusError(`trying to make an API call to ${uri}`);\n            this.addFlashMessage(`Error trying to make an API call to ${uri}`);\n            let errorMessage = `No OK response from the API. Got the HTTP status ${response.status} when doing a ${method} request to ${url}`;\n            console.log(errorMessage, {url, uri, response, headers});\n            throw new Error(errorMessage);\n        }\n    }\n\n    /**\n     * Call Paginated API\n     *\n     * This deals with the pagination, if needed.\n     *\n     * NB: The ? or & last char of the uri should be provided by the calling method.\n     * @param uri\n     * @param method\n     * @param limit\n     * @returns {Promise<[]>}\n     */\n    async callPaginatedAPI(uri, method = 'GET', limit = 200) {\n        let index = 1;\n        let page = 1;\n        this.setStatusLoading(`items from ${uri}. Page ${page}`);\n        let paginatedUri = `${uri}index=${index}&limit=${limit}`; // Add pagination query\n        let response = await this.callAPI(paginatedUri, method);\n        // console.debug(`The first paginated call to ${uri}`, {uri, paginatedUri, method, response});\n        let items = [];\n        let pagesNeeded = 1;\n        let totalRecords = 0;\n        // Add the items (or list entries, because their API isn't consistent)\n        if (response.items) {\n            items = [].concat(items, response.items);\n        }\n        if (response.list) {\n            items = [].concat(items, response.list);\n        }\n\n        if (response.pageInfo && response.pageInfo.totalRecords) {\n            totalRecords = response.pageInfo.totalRecords;\n            pagesNeeded = Math.ceil(totalRecords / limit);\n        }\n        if (pagesNeeded < 2) {\n            // Only 1 page of responses needed\n            return items;\n        }\n\n        //  --------------------------------------------------\n        //   Make the Paginated Calls (if needed)\n        //  --------------------------------------------------\n        for (page = 2; page <= pagesNeeded; page++) {\n            let index = (page - 1) * limit + 1;\n            this.setStatusLoading(`items from ${uri}. Page ${page} of ${pagesNeeded}`);\n            paginatedUri = `${uri}index=${index}&limit=${limit}`; // Add pagination query\n            // console.debug(`About to make the ${page} paginated call to ${uri}`, {paginatedUri, pagesNeeded, totalRecords});\n            response = await this.callAPI(paginatedUri, method);\n            if (response.items) {\n                // Add the entries\n                items = [].concat(items, response.items);\n            }\n            if (response.list) {\n                // Add the entries\n                items = [].concat(items, response.list);\n            }\n        }\n        return items;\n\n\n        // -- Example pageInfo\n        // \"pageInfo\": {\n        //     \"totalRecords\": 2,\n        //     \"totalDisplayRecords\": 2\n        // }\n    }\n\n\n    // -- Testing the pagination logic\n    // e.g unitTestablePagination(1802, 200); returns 10 pages worth\n    // unitTestablePagination(totalRecords, limit) {\n    //     let uri = 'test';\n    //     let index = 1;\n    //     let page = 1;\n    //     let pagesNeeded = Math.ceil(totalRecords / limit);\n    //     let paginationInfo = [];\n    //     paginationInfo.push({page, index, pagesNeeded, paginatedUri: `${uri}?index=${index}&limit=${limit}`});\n    //     for (page = 2; page <= pagesNeeded; page++) {\n    //         let index = (page - 1) * limit + 1;\n    //         // this.setStatusLoading(`items from ${uri}. Page ${page} of ${pagesNeeded}`);\n    //         paginationInfo.push({page, index, pagesNeeded, paginatedUri: `${uri}?index=${index}&limit=${limit}`}); // Add pagination query\n    //     }\n    //     return paginationInfo;\n    // }\n\n    /**\n     * Make Link Element Download\n     *\n     * Give it an existing A Href element and turn it into a link to a file download\n     *\n     * @param element\n     * @param content\n     * @param fileName\n     * @param contentType\n     * @returns {*}\n     */\n    makeLinkElementDownload(element, content, fileName, contentType) {\n        let file = new Blob([content], {type: contentType});\n        element.href = URL.createObjectURL(file);\n        element.download = fileName;\n        return element; // Don't actually need the returned element\n    }\n\n\n    /**\n     * Make Link Element Download Json\n     *\n     * Give it a link element, the array, object or whatever, plus the filename\n     * @param element\n     * @param jsonContent\n     * @param fileName\n     */\n    makeLinkElementDownloadJson(element, jsonContent, fileName = 'BlackBox.json') {\n        return this.makeLinkElementDownload(element, JSON.stringify(jsonContent, null, 2), fileName + '.json', 'application/json');\n    }\n\n    /**\n     * Make Link Element Download CSV\n     *\n     * Give it a link element, the array, object or whatever, plus the filename\n     * @param element\n     * @param csvContent\n     * @param fileName\n     */\n    makeLinkElementDownloadCsv(element, csvContent, fileName = 'BlackBox.json') {\n        return this.makeLinkElementDownload(element, csvContent, fileName + '.csv', 'text/csv');\n    }\n\n    /**\n     *\n     * If you want a new A link element\n     * But mostly so you can have it automatically clicked and start the download\n     * @param content\n     * @param fileName\n     * @param contentType\n     * @param downloadAutomatically\n     * @returns {HTMLAnchorElement}\n     */\n    createDownloadLinkElement(content, fileName, contentType, downloadAutomatically = true) {\n        let a = document.createElement(\"a\");\n        let file = new Blob([content], {type: contentType});\n        a.href = URL.createObjectURL(file);\n        a.download = fileName;\n        a.innerText = fileName;\n        if (true === downloadAutomatically) {\n            a.click(); // Automatically try to download the file cc\n        }\n        return a;\n    }\n\n}","import \"./styles.less\";\r\nimport \"regenerator-runtime/runtime\";\r\n// import BlackBoxPlusInfo from './components/blackBoxPlusInfo';\r\n// window.blackboxPlusInfo = new BlackBoxPlusInfo('Exporter');\r\nimport BlackBoxPlusExport from './components/BlackBoxPlusExport';\r\nimport {json2csvAsync} from 'json-2-csv';\r\n\r\nvar blackBoxPlusExport = new BlackBoxPlusExport('Data Exporter');\r\nwindow.blackBoxPlusExport = blackBoxPlusExport;\r\n\r\nconsole.debug(\"Configuring BlackBox Plus\");\r\nblackBoxPlusExport.setHeader('BB+ Exporter');\r\nblackBoxPlusExport.setStatusLoading('Initial Setup');\r\n\r\n(async () => {\r\n\r\n\r\n    if (!window.blackBoxPlusFootage) {\r\n        window.blackBoxPlusFootage = await blackBoxPlusExport.getAllFootage();\r\n    }\r\n    if (!window.blackBoxPlusFinancials) {\r\n        window.blackBoxPlusFinancials = await blackBoxPlusExport.getAllFinancials();\r\n    }\r\n\r\n    blackBoxPlusExport.setStatusProcessing('the creation of CSV files');\r\n    // blackBoxPlusExport.addMessage('<h2>Footage data is: </h2><code>' + JSON.stringify(blackBoxPlusFootage) + `</code>`);\r\n    let linkhrefAndClassesJson = `href=\"#\" class=\"bbox_plus_download_link bbox_plus_download_json\"`;\r\n    let linkhrefAndClassesCsv = `href=\"#\" class=\"bbox_plus_download_link bbox_plus_download_csv\"`;\r\n    blackBoxPlusExport.setInterface(`<h2>BlackBox Plus - Data Export</h2>\r\n<p>Click the links below to download the:<br />\r\n${blackBoxPlusFootage.contribute.length} Workspace Items as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_workspace_items_contribute_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_workspace_items_contribute_csv\">.csv</a><br />\r\n${blackBoxPlusFootage.curation.length} Curation Items as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_workspace_items_curation_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_workspace_items_curation_csv\">.csv</a><br />\r\n${blackBoxPlusFootage.content.length} Submitted Content Items as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_workspace_items_content_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_workspace_items_content_csv\">.csv</a><br />\r\nOr All Footage Items as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_workspace_items_all_json\">.json</a><br />\r\n<br />\r\n<h2>Financial Summary</h2>\r\nEarnings Summary as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_financial_earnings_summary_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_financial_earnings_summary_csv\">.csv</a><br />\r\nFinancial Summary as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_financial_summary_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_financial_summary_csv\">.csv</a><br />\r\nFinancial Payment History as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_financial_payment_history_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_financial_payment_history_csv\">.csv</a><br />\r\nFinancial Total Earnings Report as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_financial_total_earnings_report_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_financial_total_earnings_report_csv\">.csv</a><br />\r\nUnpaid Earnings List (recently sold but not yet paid) as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_unpaid_earnings_json\">.json</a> as <a ${linkhrefAndClassesCsv} id=\"bbox_plus_download_unpaid_earnings_csv\">.csv</a><br />\r\nOr All Financials as <a ${linkhrefAndClassesJson} id=\"bbox_plus_download_financials_all_json\">.json</a><br />\r\n\r\n</p>`);\r\n\r\n\r\n    // ----------------------------------------------------------------------------\r\n    //   CSV\r\n    // ----------------------------------------------------------------------------\r\n    let csvData = {blackBoxPlusFootage: {}, blackBoxPlusFinancials: {}};\r\n    // -- Footage\r\n    let bbox_plus_download_workspace_items_contribute_csv_promise = json2csvAsync(blackBoxPlusFootage.contribute, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFootage.contribute = data;\r\n    });\r\n    let bbox_plus_download_workspace_items_curation_csv_promise = json2csvAsync(blackBoxPlusFootage.curation, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFootage.curation = data;\r\n    });\r\n\r\n    let bbox_plus_download_workspace_items_content_csv_promise = json2csvAsync(blackBoxPlusFootage.content, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFootage.content = data;\r\n    });\r\n\r\n    // -- Financials\r\n    let bbox_plus_download_financial_earnings_summary_csv_promise = json2csvAsync(blackBoxPlusFinancials.financialEarningsSummary.items, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFinancials.financialEarningsSummary = data;\r\n    });\r\n    let bbox_plus_download_financial_summary_csv_promise = json2csvAsync(blackBoxPlusFinancials.financialSummaryInfo, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFinancials.financialSummaryInfo = data;\r\n    });\r\n    let bbox_plus_download_financial_payment_history_csv_promise = json2csvAsync(blackBoxPlusFinancials.financialPaymentHistory, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFinancials.financialPaymentHistory = data;\r\n    });\r\n    let bbox_plus_download_financial_total_earnings_report_csv_promise = json2csvAsync(blackBoxPlusFinancials.financialTotalEarningsReport, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFinancials.financialTotalEarningsReport = data;\r\n    });\r\n    let bbox_plus_download_unpaid_earnings_csv_promise = json2csvAsync(blackBoxPlusFinancials.unpaidEarnings.items, {expandArrayObjects: true}).then(function (data) {\r\n        csvData.blackBoxPlusFinancials.unpaidEarnings = data;\r\n    });\r\n    // bbox_plus_download_financial_earnings_summary_csv // process blackBoxPlusFinancials.financialEarningsSummary.items\r\n    // bbox_plus_download_financial_summary_csv // process blackBoxPlusFinancials.financialSummaryInfo\r\n    // bbox_plus_download_financial_payment_history_csv // process financialPaymentHistory\r\n    // bbox_plus_download_financial_total_earnings_report_csv // process financialTotalEarningsReport\r\n    // bbox_plus_download_unpaid_earnings_csv // process blackBoxPlusFinancials.unpaidEarnings.items\r\n\r\n\r\n    // Wait for the CSV file processing to be completed\r\n    await Promise.all([bbox_plus_download_workspace_items_contribute_csv_promise,bbox_plus_download_workspace_items_curation_csv_promise,  bbox_plus_download_workspace_items_content_csv_promise,\r\n        bbox_plus_download_financial_earnings_summary_csv_promise, bbox_plus_download_financial_summary_csv_promise, bbox_plus_download_financial_payment_history_csv_promise, bbox_plus_download_financial_total_earnings_report_csv_promise, bbox_plus_download_unpaid_earnings_csv_promise\r\n    ]);\r\n    console.debug('csvData char length is ', JSON.stringify(csvData).length);\r\n    let dateFormat = blackBoxPlusExport.getFormattedDate(); // e.g 2012-09-05th 09:02AM Based on https://www.willmaster.com/library/generators/date-and-time-formatting.php using {Y}-{M}-{D}{st} {h}:{m}{ap}\r\n    // Footage\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_workspace_items_contribute_csv')[0], csvData.blackBoxPlusFootage.contribute, `${dateFormat} BlackBox Footage - Contribute Workspace Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_workspace_items_curation_csv')[0], csvData.blackBoxPlusFootage.curation, `${dateFormat} BlackBox Footage - Curation Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_workspace_items_content_csv')[0], csvData.blackBoxPlusFootage.content, `${dateFormat} BlackBox Footage - Processed Submitted Items`);\r\n    // Finances\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_financial_earnings_summary_csv')[0], csvData.blackBoxPlusFinancials.financialEarningsSummary, `${dateFormat} BlackBox Financials Earnings Summary`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_financial_summary_csv')[0], csvData.blackBoxPlusFinancials.financialSummaryInfo, `${dateFormat} BlackBox Financials Summary Info`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_financial_payment_history_csv')[0], csvData.blackBoxPlusFinancials.financialPaymentHistory, `${dateFormat} BlackBox Financials Payment History`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_financial_total_earnings_report_csv')[0], csvData.blackBoxPlusFinancials.financialTotalEarningsReport, `${dateFormat} BlackBox Financials Total Earnings Report`);\r\n    blackBoxPlusExport.makeLinkElementDownloadCsv($('#bbox_plus_download_unpaid_earnings_csv')[0], csvData.blackBoxPlusFinancials.unpaidEarnings, `${dateFormat} BlackBox Financials Unpaid Earnings`);\r\n\r\n    // ----------------------------------------------------------------------------\r\n    //   JSON\r\n    // ----------------------------------------------------------------------------\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_workspace_items_contribute_json')[0], blackBoxPlusFootage.contribute, `${dateFormat} BlackBox Contribute Workspace Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_workspace_items_curation_json')[0], blackBoxPlusFootage.curation, `${dateFormat} BlackBox Curation Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_workspace_items_content_json')[0], blackBoxPlusFootage.content, `${dateFormat} BlackBox Content Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_workspace_items_all_json')[0], blackBoxPlusFootage, `${dateFormat} BlackBox All Footage Items`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_financial_earnings_summary_json')[0], blackBoxPlusFinancials.financialEarningsSummary, `${dateFormat} BlackBox Financial Earnings Summary Info`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_financial_summary_json')[0], blackBoxPlusFinancials.financialSummaryInfo, `${dateFormat} BlackBox Financial Summary Info`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_financial_payment_history_json')[0], blackBoxPlusFinancials.financialPaymentHistory, `${dateFormat} BlackBox Financial Payment History`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_financial_total_earnings_report_json')[0], blackBoxPlusFinancials.financialTotalEarningsReport, `${dateFormat} BlackBox Financial Total Earnings Report`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_unpaid_earnings_json')[0], blackBoxPlusFinancials.unpaidEarnings, `${dateFormat} BlackBox Financial Unpaid Earnings Summary Info`);\r\n    blackBoxPlusExport.makeLinkElementDownloadJson($('#bbox_plus_download_financials_all_json')[0], blackBoxPlusFinancials, `${dateFormat} BlackBox All Financials`);\r\n    blackBoxPlusExport.setStatusDone(`<span onClick=\"window.scrollTo(0,document.body.scrollHeight);\">View the links in the footer</span>`);\r\n    scrollTo(0, document.body.scrollHeight);\r\n\r\n    // If we want to Dedupe the contents, best option seems to be doing it based on footageId?\r\n    // https://wsvincent.com/javascript-remove-duplicates-array/\r\n    // let footageIds = blackBoxPlusFootage.content.map(function (footage) {\r\n    //     return footage.footageId;\r\n    // });\r\n    // let uniqueFootageIds = [...new Set(footageIds)];\r\n\r\n})();\r\n\r\n\r\n"],"sourceRoot":""}